KCPSM6 Assembler log file for program 'E:\pico_ddr_bram_ftdififo\pico_code\pico_code.psm'.
Generated by KCPSM6 version v2.70
Ken Chapman - Xilinx Ltd - 16th May 2014

Assembly datestamp: 01 Aug 2020
Assembly timestamp: 00:36:05

Contents
  Assembly listing
  List of PSM files
  List of CONSTANTs
  List of TABLEs
  List of STRINGs
  List of line labels
  Instruction usage statistics


Last occupied address: 113 hex
Nominal program memory size: 1K (1024)   address(9:0)
Actual memory size: 4096
  (Default memory size)
Occupied memory locations: 276
Memory locations available: 3820


Assembly listing

 Addr Code                     Instruction

 000                           ;NAMEREG S1,
 000                           ;NAMEREG S2,HH
 000                           ;NAMEREG S3,TOGL_REG
 000                           NAMEREG s0, REG1
 000                           NAMEREG s1, REG2
 000                           NAMEREG s2, DDATA
 000                           NAMEREG s3, REG
 000                           NAMEREG s4, REG4
 000                           NAMEREG s5, TEMP
 000                           NAMEREG s6, DATA
 000                           NAMEREG s7, CNTR1
 000                           NAMEREG s8, CNTR2
 000                           NAMEREG s9, SPI_REG
 000                           NAMEREG sA, ADDR1                        ; LSB ADDRES
 000                           NAMEREG sB, ADDR2
 000                           NAMEREG sC, ADDR3
 000                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 000                           ;--------------------------------------------------
 000                           CONSTANT RX_DT_RDY, 02                   ;////// INPUT
 000                           CONSTANT RX_DATA, 03                     ;////// INPUT
 000                           CONSTANT LED, 01
 000                           CONSTANT TX_DATA, 02
 000                           CONSTANT TX_STB, 03
 000                           CONSTANT RD_PULSE, 04
 000                           ;//USB
 000                           CONSTANT USB_DATA_OUT, 0B                ;;DSOUT     2
 000                           CONSTANT USB_DATA_IN, 02                 ;;DSIN      1
 000                           CONSTANT USB_RD_WR, 0A                   ;;DSOUT     3
 000                           CONSTANT usb_rxf, 04                     ;;DSIN      3
 000                           CONSTANT usb_txe, 03                     ;;DSIN      2
 000                           CONSTANT usb_rd, 0C                      ;;DSOUT     1
 000                           CONSTANT usb_wr, 09                      ;;DSOUT     4
 000                           ;// BRAM
 000                           CONSTANT BRAM_DATA_IN, 05                ;;DSIN      1
 000                           CONSTANT BRAM_W, 08                      ;;DSOUT     1
 000                           CONSTANT BRAM_ADR_70, 06                 ;;DSOUT     1
 000                           CONSTANT BRAM_ADR_158, 07                ;;DSOUT
 000                           CONSTANT BRAM_DATA_OUT, 05               ;;DSOUT
 000                           ;//////////ddr write
 000                           CONSTANT DDR_DATA_W_31_24, 13'd          ;;DSOUT
 000                           CONSTANT DDR_DATA_W_23_16, 14'd          ;;DSOUT
 000                           CONSTANT DDR_DATA_W_15_8, 15'd           ;;DSOUT
 000                           CONSTANT DDR_DATA_W_7_0, 16'd            ;;DSOUT
 000                           CONSTANT CMD_WR_PLS, 17'd                ;;DSOUT
 000                           CONSTANT WR_EN_PLS, 18'd                 ;;DSOUT
 000                           CONSTANT DDR_ADDRESS_INC_WR, 21'd        ;;DSOUT
 000                           ;CONSTANT    WR_RD_CMD        , 19'd ;;DSOUT  ;;;0 for write 1 for read
 000                           ;//////////ddr_read
 000                           CONSTANT DDR_DATA_R_31_24, 06'd          ;;DSIN
 000                           CONSTANT DDR_DATA_R_23_16, 07'd          ;;DSIN
 000                           CONSTANT DDR_DATA_R_15_8, 08'd           ;;DSIN
 000                           CONSTANT DDR_DATA_R_7_0, 09'd            ;;DSIN
 000                           CONSTANT CMD_RD_PLS, 19'd                ;;DSOUT
 000                           CONSTANT READ_EMPTY, 12'd                ;;DSIN
 000                           CONSTANT DDR_ADDRESS_INC_RD, 28'd        ;;DSOUT  ;;;;;;;;;;;;;;;;;;;;;;
 000                           CONSTANT RD_EN_PLS, 22'd                 ;;DSOUT
 000                           ;CONSTANT    DDR_ADDRESS_INC_PLS  , 21'd ;;DSOUT  ;;;;;;;;;;;;;;;;;;;
 000                           CONSTANT DDR_ADDRESS_RESET_W, 23'd       ;;DSOUT
 000                           CONSTANT DDR_ADDRESS_RESET_R, 23'd       ;;DSOUT
 000                           ;*************************
 000                           ;; SCRATCHPAD MEMORY
 000                           ;*************************
 000                           ;;;;;;Register interface
 000                           CONSTANT USER_REGADDR_15_8, 25'd         ;;DSOUT
 000                           CONSTANT USER_REGADDR_7_0, 26'd          ;;DSOUT
 000                           CONSTANT USER_REGDATAOUT, 27'd           ;;DSOUT
 000                           CONSTANT USER_REGWE, 8'd                 ;;DSOUT
 000                           CONSTANT USER_REGRE, 20'd                ;;DSOUT
 000                           CONSTANT USER_REGDATAIN, 13'd            ;;DSIN
 000                           ;;;;;;;;;;;;
 000                           CONSTANT USER_READ_START, 4'd            ;;DSOUT
 000                           CONSTANT USER_DDR_DATA1, 1'd             ;;DSIN
 000                           CONSTANT USER_DDR_DATA2, 0'd             ;;DSIN
 000                           CONSTANT USER_DDR_DATA3, 15'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA4, 20'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA5, 17'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA6, 18'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA7, 19'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA8, 16'd            ;;DSIN
 000                           CONSTANT UR_DATA_RAM, 01
 000                           CONSTANT DDR_BRAM, 02
 000                           CONSTANT CMD_WR_RD, 03
 000                           CONSTANT ST_ADD_1, 04
 000                           CONSTANT ST_ADD_2, 05
 000                           CONSTANT N_OF_BYTE1, 06
 000                           CONSTANT N_OF_BYTE2, 07
 000                           CONSTANT BT_CNT1, 08
 000                           CONSTANT BT_CNT2, 09
 000                           CONSTANT BUFF_AD1, 0A
 000                           CONSTANT BUFF_AD2, 0B
 000                           ;CONSTANT UR_DATA_RAM,01
 000                           ;CONSTANT UR_DATA_RAM,01
 000                           ;CONSTANT UR_DATA_RAM,01
 000                           CONSTANT DELL1, 36
 000                           CONSTANT DELL2, 37
 000                           CONSTANT DELL3, 38
 000                           CONSTANT DELL4, 39
 000                           CONSTANT DELL5, 3A
 000                           CONSTANT DELL6, 3B
 000                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 000                           CONSTANT RDID_9F, 9F
 000                           CONSTANT WREN_06, 06
 000                           CONSTANT PP_02, 02
 000                           CONSTANT READ_03, 03
 000                           CONSTANT RDSR_05, 05
 000                           CONSTANT SE_D8, D8
 000                           CONSTANT WRSR_01, 01
 000                           CONSTANT BE_C7, C7
 000                           CONSTANT DELAY_1US_CONSTANT, 0B          ;CONSTANT VALUE FOR DELAY RUTNS
 000  01200                    LOAD s2[DDATA], 00
 001  20091                    CALL 091[send_one_bt_usb]
 002  2201C                    JUMP 01C[CHECK_FRAME]
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003  22003         TEST_USER: JUMP 003[TEST_USER]
 004             RSER_RD_TEST: 
 004  012FF                    LOAD s2[DDATA], FF
 005  2D204                    OUTPUT s2[DDATA], 04[USER_READ_START]
 006  01200                    LOAD s2[DDATA], 00
 007  2D204                    OUTPUT s2[DDATA], 04[USER_READ_START]
 008  09214                    INPUT s2[DDATA], 14[USER_DDR_DATA4]
 009                           ;load  DDATA,38
 009  20091                    CALL 091[send_one_bt_usb]
 00A  0920F                    INPUT s2[DDATA], 0F[USER_DDR_DATA3]
 00B  20091                    CALL 091[send_one_bt_usb]
 00C  09200                    INPUT s2[DDATA], 00[USER_DDR_DATA2]
 00D  20091                    CALL 091[send_one_bt_usb]
 00E  09201                    INPUT s2[DDATA], 01[USER_DDR_DATA1]
 00F  20091                    CALL 091[send_one_bt_usb]
 010  09211                    INPUT s2[DDATA], 11[USER_DDR_DATA5]
 011  20091                    CALL 091[send_one_bt_usb]
 012  09212                    INPUT s2[DDATA], 12[USER_DDR_DATA6]
 013  20091                    CALL 091[send_one_bt_usb]
 014  09213                    INPUT s2[DDATA], 13[USER_DDR_DATA7]
 015  20091                    CALL 091[send_one_bt_usb]
 016  09210                    INPUT s2[DDATA], 10[USER_DDR_DATA8]
 017  20091                    CALL 091[send_one_bt_usb]
 018  200FE                    CALL 0FE[DELAY_107US]
 019  01220                    LOAD s2[DDATA], 20
 01A  20091                    CALL 091[send_one_bt_usb]
 01B  25000                    RETURN 
 01C                           ;$ G 12 04 R/W # DATA
 01C              CHECK_FRAME: ;$ D/B 12 34 R/W #** DATA
 01C  200A0                    CALL 0A0[take_data_in_usb]
 01D  1D224                    COMPARE s2[DDATA], 24["$"]
 01E  3601C                    JUMP NZ, 01C[CHECK_FRAME]
 01F  200A0                    CALL 0A0[take_data_in_usb]
 020  2F202                    STORE s2[DDATA], 02[DDR_BRAM]
 021  200A0                    CALL 0A0[take_data_in_usb]               ;START ADDR1
 022  2F205                    STORE s2[DDATA], 05[ST_ADD_2]
 023  200A0                    CALL 0A0[take_data_in_usb]               ;START ADDR2
 024  2F204                    STORE s2[DDATA], 04[ST_ADD_1]
 025  200A0                    CALL 0A0[take_data_in_usb]               ;NO OF BYTES1
 026  2F207                    STORE s2[DDATA], 07[N_OF_BYTE2]
 027  200A0                    CALL 0A0[take_data_in_usb]               ;;NO OF BYTES2;;;;;7 TO 0
 028  2F206                    STORE s2[DDATA], 06[N_OF_BYTE1]
 029  200A0                    CALL 0A0[take_data_in_usb]
 02A  2F203                    STORE s2[DDATA], 03[CMD_WR_RD]
 02B  200A0                    CALL 0A0[take_data_in_usb]
 02C  1D223                    COMPARE s2[DDATA], 23["#"]
 02D  3601C                    JUMP NZ, 01C[CHECK_FRAME]
 02E                    START: 
 02E  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 02F  1D247                    COMPARE s2[DDATA], 47["G"]
 030  320DA                    JUMP Z, 0DA[REG_CONTROL]
 031  0B203                    FETCH s2[DDATA], 03[CMD_WR_RD]
 032  1D252                    COMPARE s2[DDATA], 52["R"]
 033  30059                    CALL Z, 059[RD_DDR_RAM]
 034  1D257                    COMPARE s2[DDATA], 57["W"]
 035  30039                    CALL Z, 039[WR_DDR_RAM]
 036  2201C                    JUMP 01C[CHECK_FRAME]
 037                           ;
 037  2201C                    JUMP 01C[CHECK_FRAME]
 038  22038              HJGF: JUMP 038[HJGF]
 039               WR_DDR_RAM: 
 039  2D017                    OUTPUT s0[REG1], 17[DDR_ADDRESS_RESET_W]
 03A  0B004                    FETCH s0[REG1], 04[ST_ADD_1]
 03B  2F00A                    STORE s0[REG1], 0A[BUFF_AD1]
 03C  0B005                    FETCH s0[REG1], 05[ST_ADD_2]
 03D  2F00B                    STORE s0[REG1], 0B[BUFF_AD2]
 03E  01000                    LOAD s0[REG1], 00
 03F  2F008                    STORE s0[REG1], 08[BT_CNT1]
 040  2F009                    STORE s0[REG1], 09[BT_CNT2]
 041             TAKE_NXT_BYT: 
 041  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 042  1D244                    COMPARE s2[DDATA], 44["D"]
 043  32048                    JUMP Z, 048[WR_DDR]
 044  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 045  1D242                    COMPARE s2[DDATA], 42["B"]
 046  3204A                    JUMP Z, 04A[WR_BRAM]
 047  25000                    RETURN 
 048                   WR_DDR: 
 048  200C0                    CALL 0C0[WRITE_1_WORD_DDR]
 049  2204C                    JUMP 04C[NXT_LOOP]
 04A                  WR_BRAM: 
 04A  200A0                    CALL 0A0[take_data_in_usb]
 04B  2007E                    CALL 07E[WR_BRAM_DATA]
 04C                 NXT_LOOP: 
 04C  0B708                    FETCH s7[CNTR1], 08[BT_CNT1]
 04D  0B809                    FETCH s8[CNTR2], 09[BT_CNT2]
 04E  11701                    ADD s7[CNTR1], 01
 04F  13800                    ADDCY s8[CNTR2], 00
 050  2F708                    STORE s7[CNTR1], 08[BT_CNT1]
 051  2F809                    STORE s8[CNTR2], 09[BT_CNT2]
 052  0BA06                    FETCH sA[ADDR1], 06[N_OF_BYTE1]
 053  0BB07                    FETCH sB[ADDR2], 07[N_OF_BYTE2]
 054  1CA70                    COMPARE sA[ADDR1], s7[CNTR1]
 055  36041                    JUMP NZ, 041[TAKE_NXT_BYT]
 056  1CB80                    COMPARE sB[ADDR2], s8[CNTR2]
 057  36041                    JUMP NZ, 041[TAKE_NXT_BYT]
 058  25000                    RETURN 
 059               RD_DDR_RAM: 
 059  2D017                    OUTPUT s0[REG1], 17[DDR_ADDRESS_RESET_R]
 05A  01000                    LOAD s0[REG1], 00
 05B  2F008                    STORE s0[REG1], 08[BT_CNT1]
 05C  2F009                    STORE s0[REG1], 09[BT_CNT2]
 05D  0B004                    FETCH s0[REG1], 04[ST_ADD_1]
 05E  2F00A                    STORE s0[REG1], 0A[BUFF_AD1]
 05F  0B005                    FETCH s0[REG1], 05[ST_ADD_2]
 060  2F00B                    STORE s0[REG1], 0B[BUFF_AD2]
 061             SEND_NXT_BYT: 
 061  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 062  1D244                    COMPARE s2[DDATA], 44["D"]
 063  32068                    JUMP Z, 068[RD_DDR]
 064  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 065  1D242                    COMPARE s2[DDATA], 42["B"]
 066  3206A                    JUMP Z, 06A[RD_BRAM]
 067  25000                    RETURN 
 068                   RD_DDR: 
 068  200C5                    CALL 0C5[READ_1_WORD_DDR]
 069  22071                    JUMP 071[NXT_LOOP1]
 06A                  RD_BRAM: 
 06A  20081                    CALL 081[INC_BRAM_ADDRESS]
 06B                           ;INPUT DDATA,BRAM_DATA_IN
 06B  0B207                    FETCH s2[DDATA], 07[N_OF_BYTE2]
 06C  20091                    CALL 091[send_one_bt_usb]
 06D  0B206                    FETCH s2[DDATA], 06[N_OF_BYTE1]
 06E  20091                    CALL 091[send_one_bt_usb]
 06F  01220                    LOAD s2[DDATA], 20
 070  20091                    CALL 091[send_one_bt_usb]
 071                NXT_LOOP1: 
 071  0B708                    FETCH s7[CNTR1], 08[BT_CNT1]
 072  0B809                    FETCH s8[CNTR2], 09[BT_CNT2]
 073  11701                    ADD s7[CNTR1], 01
 074  13800                    ADDCY s8[CNTR2], 00
 075  2F708                    STORE s7[CNTR1], 08[BT_CNT1]
 076  2F809                    STORE s8[CNTR2], 09[BT_CNT2]
 077  0BA06                    FETCH sA[ADDR1], 06[N_OF_BYTE1]
 078  0BB07                    FETCH sB[ADDR2], 07[N_OF_BYTE2]
 079  1CA70                    COMPARE sA[ADDR1], s7[CNTR1]
 07A  36061                    JUMP NZ, 061[SEND_NXT_BYT]
 07B  1CB80                    COMPARE sB[ADDR2], s8[CNTR2]
 07C  36061                    JUMP NZ, 061[SEND_NXT_BYT]
 07D  25000                    RETURN 
 07E             WR_BRAM_DATA: 
 07E  2D205                    OUTPUT s2[DDATA], 05[BRAM_DATA_OUT]
 07F  20081                    CALL 081[INC_BRAM_ADDRESS]
 080  25000                    RETURN 
 081  0BA0A  INC_BRAM_ADDRESS: FETCH sA[ADDR1], 0A[BUFF_AD1]
 082  0BB0B                    FETCH sB[ADDR2], 0B[BUFF_AD2]
 083  11A01                    ADD sA[ADDR1], 01
 084  13B00                    ADDCY sB[ADDR2], 00
 085  2DA06                    OUTPUT sA[ADDR1], 06[BRAM_ADR_70]
 086  2DB07                    OUTPUT sB[ADDR2], 07[BRAM_ADR_158]
 087  2FA0A                    STORE sA[ADDR1], 0A[BUFF_AD1]
 088  2FB0B                    STORE sB[ADDR2], 0B[BUFF_AD2]
 089  25000                    RETURN 
 08A           CHK_DT_PRESENT: 
 08A  09002                    INPUT s0[REG1], 02[RX_DT_RDY]
 08B  1D001                    COMPARE s0[REG1], 01[00000001'b]
 08C  3608A                    JUMP NZ, 08A[CHK_DT_PRESENT]
 08D  2D004                    OUTPUT s0[REG1], 04[RD_PULSE]
 08E  09003                    INPUT s0[REG1], 03[RX_DATA]
 08F  2D001                    OUTPUT s0[REG1], 01[LED]
 090  25000                    RETURN 
 091          send_one_bt_usb: 
 091               wr_rdy_chk: 
 091  09003                    INPUT s0[REG1], 03[usb_txe]
 092  0D001                    TEST s0[REG1], 01[00000001'b]
 093  36091                    JUMP NZ, 091[wr_rdy_chk]
 094  01000                    LOAD s0[REG1], 00
 095  2D00A                    OUTPUT s0[REG1], 0A[USB_RD_WR]
 096  2D20B                    OUTPUT s2[DDATA], 0B[USB_DATA_OUT]
 097  01000                    LOAD s0[REG1], 00
 098  2D009                    OUTPUT s0[REG1], 09[usb_wr]
 099  010FF                    LOAD s0[REG1], FF
 09A  2D009                    OUTPUT s0[REG1], 09[usb_wr]
 09B  200FE                    CALL 0FE[DELAY_107US]
 09C  200FE                    CALL 0FE[DELAY_107US]
 09D  010FF                    LOAD s0[REG1], FF
 09E  2D00A                    OUTPUT s0[REG1], 0A[USB_RD_WR]
 09F  25000                    RETURN 
 0A0         take_data_in_usb: 
 0A0  09004                    INPUT s0[REG1], 04[usb_rxf]
 0A1  0D001                    TEST s0[REG1], 01[00000001'b]
 0A2  360A0                    JUMP NZ, 0A0[take_data_in_usb]
 0A3  010FF                    LOAD s0[REG1], FF
 0A4  2D00A                    OUTPUT s0[REG1], 0A[USB_RD_WR]
 0A5  2D00C                    OUTPUT s0[REG1], 0C[usb_rd]
 0A6  09202                    INPUT s2[DDATA], 02[USB_DATA_IN]
 0A7  25000                    RETURN 
 0A8                LED_BLINK: 
 0A8  19001               LP1: SUB s0[REG1], 01
 0A9  016AA                    LOAD s6[DATA], AA
 0AA  2D601                    OUTPUT s6[DATA], 01[LED]
 0AB  20106                    CALL 106[DELAY_20MS]
 0AC  20106                    CALL 106[DELAY_20MS]
 0AD  01655                    LOAD s6[DATA], 55
 0AE  2D601                    OUTPUT s6[DATA], 01[LED]
 0AF  20106                    CALL 106[DELAY_20MS]
 0B0  20106                    CALL 106[DELAY_20MS]
 0B1  20106                    CALL 106[DELAY_20MS]
 0B2  20106                    CALL 106[DELAY_20MS]
 0B3  1D000                    COMPARE s0[REG1], 00
 0B4  360A8                    JUMP NZ, 0A8[LP1]
 0B5  25000                    RETURN 
 0B6             DATA_OUT_DDR: 
 0B6  200A0                    CALL 0A0[take_data_in_usb]
 0B7  2D20D                    OUTPUT s2[DDATA], 0D[DDR_DATA_W_31_24]
 0B8  200A0                    CALL 0A0[take_data_in_usb]
 0B9  2D20E                    OUTPUT s2[DDATA], 0E[DDR_DATA_W_23_16]
 0BA  200A0                    CALL 0A0[take_data_in_usb]
 0BB  2D20F                    OUTPUT s2[DDATA], 0F[DDR_DATA_W_15_8]
 0BC  200A0                    CALL 0A0[take_data_in_usb]
 0BD  2D210                    OUTPUT s2[DDATA], 10[DDR_DATA_W_7_0]
 0BE  2D212                    OUTPUT s2[DDATA], 12[WR_EN_PLS]
 0BF  25000                    RETURN 
 0C0         WRITE_1_WORD_DDR: 
 0C0  200B6                    CALL 0B6[DATA_OUT_DDR]
 0C1  200B6                    CALL 0B6[DATA_OUT_DDR]
 0C2  2D211                    OUTPUT s2[DDATA], 11[CMD_WR_PLS]
 0C3  2D215                    OUTPUT s2[DDATA], 15[DDR_ADDRESS_INC_WR]
 0C4  25000                    RETURN 
 0C5          READ_1_WORD_DDR: 
 0C5                           ;LOAD DDATA,01   ; READ cmd
 0C5                           ;OUTPUT DDATA,WR_RD_CMD  ; READ cmd
 0C5  2D213                    OUTPUT s2[DDATA], 13[CMD_RD_PLS]
 0C6  0900C    WAIT_FOR_DATA1: INPUT s0[REG1], 0C[READ_EMPTY]
 0C7  1D001                    COMPARE s0[REG1], 01
 0C8  320C6                    JUMP Z, 0C6[WAIT_FOR_DATA1]
 0C9  200CD                    CALL 0CD[DATA_IN_DDR]
 0CA  200CD                    CALL 0CD[DATA_IN_DDR]
 0CB  2D21C                    OUTPUT s2[DDATA], 1C[DDR_ADDRESS_INC_RD]
 0CC  25000                    RETURN 
 0CD              DATA_IN_DDR: 
 0CD  0900C     WAIT_FOR_DATA: INPUT s0[REG1], 0C[READ_EMPTY]
 0CE  1D001                    COMPARE s0[REG1], 01
 0CF  320CD                    JUMP Z, 0CD[WAIT_FOR_DATA]
 0D0                           ;CALL DELAY_1S
 0D0  09206                    INPUT s2[DDATA], 06[DDR_DATA_R_31_24]
 0D1  20091                    CALL 091[send_one_bt_usb]
 0D2  09207                    INPUT s2[DDATA], 07[DDR_DATA_R_23_16]
 0D3  20091                    CALL 091[send_one_bt_usb]
 0D4  09208                    INPUT s2[DDATA], 08[DDR_DATA_R_15_8]
 0D5  20091                    CALL 091[send_one_bt_usb]
 0D6  09209                    INPUT s2[DDATA], 09[DDR_DATA_R_7_0]
 0D7  20091                    CALL 091[send_one_bt_usb]
 0D8  2D216                    OUTPUT s2[DDATA], 16[RD_EN_PLS]
 0D9  25000                    RETURN 
 0DA              REG_CONTROL: 
 0DA  0B203                    FETCH s2[DDATA], 03[CMD_WR_RD]
 0DB  1D257                    COMPARE s2[DDATA], 57["W"]
 0DC  320E0                    JUMP Z, 0E0[W_USER_REG]
 0DD  1D252                    COMPARE s2[DDATA], 52["R"]
 0DE  320EC                    JUMP Z, 0EC[R_USER_REG]
 0DF  2201C                    JUMP 01C[CHECK_FRAME]
 0E0  0B205        W_USER_REG: FETCH s2[DDATA], 05[ST_ADD_2]
 0E1  2D219                    OUTPUT s2[DDATA], 19[USER_REGADDR_15_8]
 0E2  0B204                    FETCH s2[DDATA], 04[ST_ADD_1]
 0E3  2D21A                    OUTPUT s2[DDATA], 1A[USER_REGADDR_7_0]
 0E4  0B207                    FETCH s2[DDATA], 07[N_OF_BYTE2]          ;; NOT USED
 0E5  0B206                    FETCH s2[DDATA], 06[N_OF_BYTE1]
 0E6  2D21B                    OUTPUT s2[DDATA], 1B[USER_REGDATAOUT]
 0E7  012FF                    LOAD s2[DDATA], FF
 0E8  2D208                    OUTPUT s2[DDATA], 08[USER_REGWE]         ;; WRITE ENABLE PULSE
 0E9  01200                    LOAD s2[DDATA], 00
 0EA  2D208                    OUTPUT s2[DDATA], 08[USER_REGWE]         ;; WRITE ENABLE PULSE
 0EB  2201C                    JUMP 01C[CHECK_FRAME]
 0EC               R_USER_REG: 
 0EC  0B205                    FETCH s2[DDATA], 05[ST_ADD_2]
 0ED  2D219                    OUTPUT s2[DDATA], 19[USER_REGADDR_15_8]
 0EE  0B204                    FETCH s2[DDATA], 04[ST_ADD_1]
 0EF  2D21A                    OUTPUT s2[DDATA], 1A[USER_REGADDR_7_0]
 0F0  0B207                    FETCH s2[DDATA], 07[N_OF_BYTE2]          ;; NOT USED
 0F1  0B206                    FETCH s2[DDATA], 06[N_OF_BYTE1]          ;; NOT USED
 0F2  2D214                    OUTPUT s2[DDATA], 14[USER_REGRE]         ;; READ ENABLE PULSE
 0F3  01225                    LOAD s2[DDATA], 25["%"]
 0F4  20091                    CALL 091[send_one_bt_usb]
 0F5  0920D                    INPUT s2[DDATA], 0D[USER_REGDATAIN]
 0F6  20091                    CALL 091[send_one_bt_usb]
 0F7  01223                    LOAD s2[DDATA], 23["#"]
 0F8  20091                    CALL 091[send_one_bt_usb]
 0F9  2201C                    JUMP 01C[CHECK_FRAME]
 0FA                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ALL DELAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 0FA                           ;--
 0FA                           ;|1000000/416NS
 0FA                           ;|--------------------------===== CNT
 0FA                           ;|10
 0FA                           ;|--------
 0FA                           ; 10US IS 1000     (1000000/416 = 000018 HEX)   FOR 24MHZ
 0FA               DELAY_10US: 
 0FA  01F00                    LOAD sF, 00
 0FB  01E00                    LOAD sE, 00
 0FC  01D18                    LOAD sD, 18
 0FD  2210E                    JUMP 10E[SOFTWARE_DELAY]
 0FE                           ; 10US IS 1000     (1000000/416 = 000101 HEX)   FOR 24MHZ
 0FE              DELAY_107US: 
 0FE  01F00                    LOAD sF, 00
 0FF  01E01                    LOAD sE, 01
 100  01D01                    LOAD sD, 01
 101  2210E                    JUMP 10E[SOFTWARE_DELAY]
 102                           ; 1MS IS 1000     (1000/416 = 000963 HEX)   FOR 24MHZ
 102                DELAY_1MS: 
 102  01F00                    LOAD sF, 00
 103  01E09                    LOAD sE, 09
 104  01D63                    LOAD sD, 63
 105  2210E                    JUMP 10E[SOFTWARE_DELAY]
 106                           ;
 106                           ; 20MS IS 20,000  100NS  (20,000/416 = 00BBCD HEX)  FOR 24MHZ
 106  01F00        DELAY_20MS: LOAD sF, 00
 107  01E5D                    LOAD sE, 5D
 108  01DC9                    LOAD sD, C9
 109  2210E                    JUMP 10E[SOFTWARE_DELAY]
 10A                           ;
 10A                           ;
 10A                           ; 1S IS 10,000,00 X 10NS      (1/416 = 24AE06 HEX)  FOR 24MHZ
 10A  01F24          DELAY_1S: LOAD sF, 24
 10B  01EAE                    LOAD sE, AE
 10C  01D06                    LOAD sD, 06
 10D  2210E                    JUMP 10E[SOFTWARE_DELAY]
 10E                           ;
 10E                           ; THE DELAY LOOP DECREMENTS [S2,S1,S0] UNTIL IT REACHES ZERO
 10E                           ; EACH DECREMENT CYCLE IS 5 INSTRUCTIONS WHICH IS 10 CLOCK CYCLES (416NS AT 24MHZ)
 10E  00DD0    SOFTWARE_DELAY: LOAD sD, sD                              ;PAD LOOP TO MAKE IT 10 CLOCK CYCLES (5 INSTRUCTIONS)
 10F  19D01                    SUB sD, 01[1'd]
 110  1BE00                    SUBCY sE, 00[0'd]
 111  1BF00                    SUBCY sF, 00[0'd]
 112  3610E                    JUMP NZ, 10E[SOFTWARE_DELAY]
 113  25000                    RETURN 
 114                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


All unused memory locations contain zero (equivalent to 'LOAD s0, s0')



List of PSM files that have been assembled

E:\pico_ddr_bram_ftdififo\pico_code\pico_code.psm



List of defined constants

 CONSTANT name       Value        Source PSM File

 timestamp_hours     00'd         
 timestamp_minutes   36'd         
 timestamp_seconds   05'd         
 datestamp_year      20'd         
 datestamp_month     8'd          
 datestamp_day       01'd         
 NUL                 00           
 BEL                 07           
 BS                  08           
 HT                  09           
 LF                  0A           
 VT                  0B           
 CR                  0D           
 ESC                 1B           
 DEL                 7F           
 DCS                 90           
 ST                  9C           
 RX_DT_RDY           02           pico_code.psm
 RX_DATA             03           pico_code.psm
 LED                 01           pico_code.psm
 TX_DATA             02           pico_code.psm
 TX_STB              03           pico_code.psm
 RD_PULSE            04           pico_code.psm
 USB_DATA_OUT        0B           pico_code.psm
 USB_DATA_IN         02           pico_code.psm
 USB_RD_WR           0A           pico_code.psm
 usb_rxf             04           pico_code.psm
 usb_txe             03           pico_code.psm
 usb_rd              0C           pico_code.psm
 usb_wr              09           pico_code.psm
 BRAM_DATA_IN        05           pico_code.psm
 BRAM_W              08           pico_code.psm
 BRAM_ADR_70         06           pico_code.psm
 BRAM_ADR_158        07           pico_code.psm
 BRAM_DATA_OUT       05           pico_code.psm
 DDR_DATA_W_31_24    13'd         pico_code.psm
 DDR_DATA_W_23_16    14'd         pico_code.psm
 DDR_DATA_W_15_8     15'd         pico_code.psm
 DDR_DATA_W_7_0      16'd         pico_code.psm
 CMD_WR_PLS          17'd         pico_code.psm
 WR_EN_PLS           18'd         pico_code.psm
 DDR_ADDRESS_INC_WR  21'd         pico_code.psm
 DDR_DATA_R_31_24    06'd         pico_code.psm
 DDR_DATA_R_23_16    07'd         pico_code.psm
 DDR_DATA_R_15_8     08'd         pico_code.psm
 DDR_DATA_R_7_0      09'd         pico_code.psm
 CMD_RD_PLS          19'd         pico_code.psm
 READ_EMPTY          12'd         pico_code.psm
 DDR_ADDRESS_INC_RD  28'd         pico_code.psm
 RD_EN_PLS           22'd         pico_code.psm
 DDR_ADDRESS_RESET_W 23'd         pico_code.psm
 DDR_ADDRESS_RESET_R 23'd         pico_code.psm
 USER_REGADDR_15_8   25'd         pico_code.psm
 USER_REGADDR_7_0    26'd         pico_code.psm
 USER_REGDATAOUT     27'd         pico_code.psm
 USER_REGWE          8'd          pico_code.psm
 USER_REGRE          20'd         pico_code.psm
 USER_REGDATAIN      13'd         pico_code.psm
 USER_READ_START     4'd          pico_code.psm
 USER_DDR_DATA1      1'd          pico_code.psm
 USER_DDR_DATA2      0'd          pico_code.psm
 USER_DDR_DATA3      15'd         pico_code.psm
 USER_DDR_DATA4      20'd         pico_code.psm
 USER_DDR_DATA5      17'd         pico_code.psm
 USER_DDR_DATA6      18'd         pico_code.psm
 USER_DDR_DATA7      19'd         pico_code.psm
 USER_DDR_DATA8      16'd         pico_code.psm
 UR_DATA_RAM         01           pico_code.psm
 DDR_BRAM            02           pico_code.psm
 CMD_WR_RD           03           pico_code.psm
 ST_ADD_1            04           pico_code.psm
 ST_ADD_2            05           pico_code.psm
 N_OF_BYTE1          06           pico_code.psm
 N_OF_BYTE2          07           pico_code.psm
 BT_CNT1             08           pico_code.psm
 BT_CNT2             09           pico_code.psm
 BUFF_AD1            0A           pico_code.psm
 BUFF_AD2            0B           pico_code.psm
 DELL1               36           pico_code.psm
 DELL2               37           pico_code.psm
 DELL3               38           pico_code.psm
 DELL4               39           pico_code.psm
 DELL5               3A           pico_code.psm
 DELL6               3B           pico_code.psm
 RDID_9F             9F           pico_code.psm
 WREN_06             06           pico_code.psm
 PP_02               02           pico_code.psm
 READ_03             03           pico_code.psm
 RDSR_05             05           pico_code.psm
 SE_D8               D8           pico_code.psm
 WRSR_01             01           pico_code.psm
 BE_C7               C7           pico_code.psm
 DELAY_1US_CONSTANT  0B           pico_code.psm



No TABLEs defined



List of text strings

 STRING name       String         Source PSM File

 KCPSM6_version$   "v2.70"        
 datestamp$        "01 Aug 2020"  
 timestamp$        "00:36:05"     



List of line labels

   Label              Addr  Source PSM File

   TEST_USER          003   pico_code.psm
 * RSER_RD_TEST       004   pico_code.psm
   CHECK_FRAME        01C   pico_code.psm
 * START              02E   pico_code.psm
   HJGF               038   pico_code.psm
   WR_DDR_RAM         039   pico_code.psm
   TAKE_NXT_BYT       041   pico_code.psm
   WR_DDR             048   pico_code.psm
   WR_BRAM            04A   pico_code.psm
   NXT_LOOP           04C   pico_code.psm
   RD_DDR_RAM         059   pico_code.psm
   SEND_NXT_BYT       061   pico_code.psm
   RD_DDR             068   pico_code.psm
   RD_BRAM            06A   pico_code.psm
   NXT_LOOP1          071   pico_code.psm
   WR_BRAM_DATA       07E   pico_code.psm
   INC_BRAM_ADDRESS   081   pico_code.psm
   CHK_DT_PRESENT     08A   pico_code.psm
   send_one_bt_usb    091   pico_code.psm
   wr_rdy_chk         091   pico_code.psm
   take_data_in_usb   0A0   pico_code.psm
 * LED_BLINK          0A8   pico_code.psm
   LP1                0A8   pico_code.psm
   DATA_OUT_DDR       0B6   pico_code.psm
   WRITE_1_WORD_DDR   0C0   pico_code.psm
   READ_1_WORD_DDR    0C5   pico_code.psm
   WAIT_FOR_DATA1     0C6   pico_code.psm
   DATA_IN_DDR        0CD   pico_code.psm
   WAIT_FOR_DATA      0CD   pico_code.psm
   REG_CONTROL        0DA   pico_code.psm
   W_USER_REG         0E0   pico_code.psm
   R_USER_REG         0EC   pico_code.psm
 * DELAY_10US         0FA   pico_code.psm
   DELAY_107US        0FE   pico_code.psm
 * DELAY_1MS          102   pico_code.psm
   DELAY_20MS         106   pico_code.psm
 * DELAY_1S           10A   pico_code.psm
   SOFTWARE_DELAY     10E   pico_code.psm

      * Line label has not been referenced in any instructions.
        Hint - This may indicate unused code that could be
               removed to reduce the size of this program.



Instruction usage statistics

 Instruction    Instances

 LOAD             34
 STAR              -

 AND               -
 OR                -
 XOR               -

 ADD               3
 ADDCY             3
 SUB               2
 SUBCY             2

 TEST              2
 TESTCY            -
 COMPARE          19
 COMPARECY         -

 SL0               -
 SL1               -
 SLX               -
 SLA               -
 RL                -
 SR0               -
 SR1               -
 SRX               -
 SRA               -
 RR                -

 REGBANK           -

 INPUT            20
 OUTPUT           36
 OUTPUTK           -

 STORE            31
 FETCH            31

 DISABLE           -
 ENABLE            -
 RETURNI           -

 JUMP             35
 JUMP@             -
 CALL             53
 CALL@             -
 RETURN           16
 LOAD&RETURN       -

 HWBUILD           -



End of KCPSM6 log file.
