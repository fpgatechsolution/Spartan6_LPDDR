KCPSM6 Assembler log file for program 'E:\pico_ddr_bram_ftdififo\pico_code\pico_code.psm'.
Generated by KCPSM6 version v2.70
Ken Chapman - Xilinx Ltd - 16th May 2014

Assembly datestamp: 08 Aug 2020
Assembly timestamp: 01:45:11

Contents
  Assembly listing
  List of PSM files
  List of CONSTANTs
  List of TABLEs
  List of STRINGs
  List of line labels
  Instruction usage statistics


Last occupied address: 141 hex
Nominal program memory size: 1K (1024)   address(9:0)
Actual memory size: 4096
  (Default memory size)
Occupied memory locations: 322
Memory locations available: 3774


Assembly listing

 Addr Code                     Instruction

 000                           ;NAMEREG S1,
 000                           ;NAMEREG S2,HH
 000                           ;NAMEREG S3,TOGL_REG
 000                           NAMEREG s0, REG1
 000                           NAMEREG s1, REG2
 000                           NAMEREG s2, DDATA
 000                           NAMEREG s3, REG
 000                           NAMEREG s4, REG4
 000                           NAMEREG s5, TEMP
 000                           NAMEREG s6, DATA
 000                           NAMEREG s7, CNTR1
 000                           NAMEREG s8, CNTR2
 000                           NAMEREG s9, SPI_REG
 000                           NAMEREG sA, ADDR1                        ; LSB ADDRES
 000                           NAMEREG sB, ADDR2
 000                           NAMEREG sC, ADDR3
 000                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 000                           ;--------------------------------------------------
 000                           CONSTANT RX_DT_RDY, 02                   ;////// INPUT
 000                           CONSTANT RX_DATA, 03                     ;////// INPUT
 000                           CONSTANT LED, 01
 000                           CONSTANT TX_DATA, 02
 000                           CONSTANT TX_STB, 03
 000                           CONSTANT RD_PULSE, 04
 000                           ;//USB
 000                           CONSTANT USB_DATA_OUT, 0B                ;;DSOUT     2
 000                           CONSTANT USB_DATA_IN, 02                 ;;DSIN      1
 000                           CONSTANT USB_RD_WR, 0A                   ;;DSOUT     3
 000                           CONSTANT usb_rxf, 04                     ;;DSIN      3
 000                           CONSTANT usb_txe, 03                     ;;DSIN      2
 000                           CONSTANT usb_rd, 0C                      ;;DSOUT     1
 000                           CONSTANT usb_wr, 09                      ;;DSOUT     4
 000                           ;// BRAM
 000                           CONSTANT BRAM_DATA_IN, 05                ;;DSIN      1
 000                           CONSTANT BRAM_W, 08                      ;;DSOUT     1
 000                           CONSTANT BRAM_ADR_70, 06                 ;;DSOUT     1
 000                           CONSTANT BRAM_ADR_158, 07                ;;DSOUT
 000                           CONSTANT BRAM_DATA_OUT, 05               ;;DSOUT
 000                           ;//////////ddr write
 000                           CONSTANT DDR_DATA_W_31_24, 13'd          ;;DSOUT
 000                           CONSTANT DDR_DATA_W_23_16, 14'd          ;;DSOUT
 000                           CONSTANT DDR_DATA_W_15_8, 15'd           ;;DSOUT
 000                           CONSTANT DDR_DATA_W_7_0, 16'd            ;;DSOUT
 000                           CONSTANT CMD_WR_PLS, 17'd                ;;DSOUT
 000                           CONSTANT WR_EN_PLS, 18'd                 ;;DSOUT
 000                           CONSTANT DDR_ADDRESS_INC_WR, 21'd        ;;DSOUT
 000                           ;CONSTANT    WR_RD_CMD        , 19'd ;;DSOUT  ;;;0 for write 1 for read
 000                           ;//////////ddr_read
 000                           CONSTANT DDR_DATA_R_31_24, 06'd          ;;DSIN
 000                           CONSTANT DDR_DATA_R_23_16, 07'd          ;;DSIN
 000                           CONSTANT DDR_DATA_R_15_8, 08'd           ;;DSIN
 000                           CONSTANT DDR_DATA_R_7_0, 09'd            ;;DSIN
 000                           CONSTANT CMD_RD_PLS, 19'd                ;;DSOUT
 000                           CONSTANT READ_EMPTY, 12'd                ;;DSIN
 000                           CONSTANT DDR_ADDRESS_INC_RD, 28'd        ;;DSOUT  ;;;;;;;;;;;;;;;;;;;;;;
 000                           CONSTANT RD_EN_PLS, 22'd                 ;;DSOUT
 000                           ;CONSTANT    DDR_ADDRESS_INC_PLS  , 21'd ;;DSOUT  ;;;;;;;;;;;;;;;;;;;
 000                           CONSTANT DDR_ADDRESS_RESET_W, 23'd       ;;DSOUT
 000                           CONSTANT DDR_ADDRESS_RESET_R, 24'd       ;;DSOUT
 000                           ;*************************
 000                           ;; SCRATCHPAD MEMORY
 000                           ;*************************
 000                           ;;;;;;Register interface
 000                           CONSTANT USER_REGADDR_15_8, 25'd         ;;DSOUT
 000                           CONSTANT USER_REGADDR_7_0, 26'd          ;;DSOUT
 000                           CONSTANT USER_REGDATAOUT, 27'd           ;;DSOUT
 000                           CONSTANT USER_REGWE, 8'd                 ;;DSOUT
 000                           CONSTANT USER_REGRE, 20'd                ;;DSOUT
 000                           CONSTANT USER_REGDATAIN, 13'd            ;;DSIN
 000                           ;;;;;;;;;;;;
 000                           CONSTANT USER_READ_START, 4'd            ;;DSOUT
 000                           CONSTANT USER_DDR_DATA1, 1'd             ;;DSIN
 000                           CONSTANT USER_DDR_DATA2, 0'd             ;;DSIN
 000                           CONSTANT USER_DDR_DATA3, 15'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA4, 20'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA5, 17'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA6, 18'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA7, 19'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA8, 16'd            ;;DSIN
 000                           CONSTANT UR_DATA_RAM, 01
 000                           CONSTANT DDR_BRAM, 02
 000                           CONSTANT CMD_WR_RD, 03
 000                           CONSTANT ST_ADD_1, 04
 000                           CONSTANT ST_ADD_2, 05
 000                           CONSTANT N_OF_BYTE1, 06
 000                           CONSTANT N_OF_BYTE2, 07
 000                           CONSTANT BT_CNT1, 08
 000                           CONSTANT BT_CNT2, 09
 000                           CONSTANT BUFF_AD1, 0A
 000                           CONSTANT BUFF_AD2, 0B
 000                           ;CONSTANT UR_DATA_RAM,01
 000                           ;CONSTANT UR_DATA_RAM,01
 000                           ;CONSTANT UR_DATA_RAM,01
 000                           CONSTANT DELL1, 36
 000                           CONSTANT DELL2, 37
 000                           CONSTANT DELL3, 38
 000                           CONSTANT DELL4, 39
 000                           CONSTANT DELL5, 3A
 000                           CONSTANT DELL6, 3B
 000                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 000                           CONSTANT RDID_9F, 9F
 000                           CONSTANT WREN_06, 06
 000                           CONSTANT PP_02, 02
 000                           CONSTANT READ_03, 03
 000                           CONSTANT RDSR_05, 05
 000                           CONSTANT SE_D8, D8
 000                           CONSTANT WRSR_01, 01
 000                           CONSTANT BE_C7, C7
 000                           CONSTANT DELAY_1US_CONSTANT, 0B          ;CONSTANT VALUE FOR DELAY RUTNS
 000  01200                    LOAD s2[DDATA], 00
 001  2008B                    CALL 08B[send_one_bt_usb]
 002  2201C                    JUMP 01C[CHECK_FRAME]
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003  22003         TEST_USER: JUMP 003[TEST_USER]
 004             RSER_RD_TEST: 
 004  012FF                    LOAD s2[DDATA], FF
 005  2D204                    OUTPUT s2[DDATA], 04[USER_READ_START]
 006  01200                    LOAD s2[DDATA], 00
 007  2D204                    OUTPUT s2[DDATA], 04[USER_READ_START]
 008  09214                    INPUT s2[DDATA], 14[USER_DDR_DATA4]
 009                           ;load  DDATA,38
 009  2008B                    CALL 08B[send_one_bt_usb]
 00A  0920F                    INPUT s2[DDATA], 0F[USER_DDR_DATA3]
 00B  2008B                    CALL 08B[send_one_bt_usb]
 00C  09200                    INPUT s2[DDATA], 00[USER_DDR_DATA2]
 00D  2008B                    CALL 08B[send_one_bt_usb]
 00E  09201                    INPUT s2[DDATA], 01[USER_DDR_DATA1]
 00F  2008B                    CALL 08B[send_one_bt_usb]
 010  09211                    INPUT s2[DDATA], 11[USER_DDR_DATA5]
 011  2008B                    CALL 08B[send_one_bt_usb]
 012  09212                    INPUT s2[DDATA], 12[USER_DDR_DATA6]
 013  2008B                    CALL 08B[send_one_bt_usb]
 014  09213                    INPUT s2[DDATA], 13[USER_DDR_DATA7]
 015  2008B                    CALL 08B[send_one_bt_usb]
 016  09210                    INPUT s2[DDATA], 10[USER_DDR_DATA8]
 017  2008B                    CALL 08B[send_one_bt_usb]
 018  2012C                    CALL 12C[DELAY_107US]
 019  01220                    LOAD s2[DDATA], 20
 01A  2008B                    CALL 08B[send_one_bt_usb]
 01B  25000                    RETURN 
 01C                           ;$ G 12 04 R/W # DATA
 01C              CHECK_FRAME: ;$ D/B 12 34 R/W #** DATA
 01C  2009A                    CALL 09A[take_data_in_usb]
 01D  1D224                    COMPARE s2[DDATA], 24["$"]
 01E  3601C                    JUMP NZ, 01C[CHECK_FRAME]
 01F  2009A                    CALL 09A[take_data_in_usb]
 020  2F202                    STORE s2[DDATA], 02[DDR_BRAM]
 021  2009A                    CALL 09A[take_data_in_usb]               ;START ADDR1
 022  2F205                    STORE s2[DDATA], 05[ST_ADD_2]
 023  2009A                    CALL 09A[take_data_in_usb]               ;START ADDR2
 024  2F204                    STORE s2[DDATA], 04[ST_ADD_1]
 025  2009A                    CALL 09A[take_data_in_usb]               ;NO OF BYTES1
 026  2F207                    STORE s2[DDATA], 07[N_OF_BYTE2]
 027  2009A                    CALL 09A[take_data_in_usb]               ;;NO OF BYTES2;;;;;7 TO 0
 028  2F206                    STORE s2[DDATA], 06[N_OF_BYTE1]
 029  2009A                    CALL 09A[take_data_in_usb]
 02A  2F203                    STORE s2[DDATA], 03[CMD_WR_RD]
 02B  2009A                    CALL 09A[take_data_in_usb]
 02C  1D223                    COMPARE s2[DDATA], 23["#"]
 02D  3601C                    JUMP NZ, 01C[CHECK_FRAME]
 02E                    START: 
 02E                           ; FETCH DDATA,N_OF_BYTE2
 02E                           ; CALL send_one_bt_usb
 02E                           ; FETCH DDATA,N_OF_BYTE1
 02E                           ; CALL send_one_bt_usb
 02E  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 02F  1D247                    COMPARE s2[DDATA], 47["G"]
 030  32108                    JUMP Z, 108[REG_CONTROL]
 031  0B203                    FETCH s2[DDATA], 03[CMD_WR_RD]
 032  1D252                    COMPARE s2[DDATA], 52["R"]
 033  30058                    CALL Z, 058[RD_DDR_RAM]
 034  1D257                    COMPARE s2[DDATA], 57["W"]
 035  30039                    CALL Z, 039[WR_DDR_RAM]
 036  2201C                    JUMP 01C[CHECK_FRAME]
 037                           ;
 037  2201C                    JUMP 01C[CHECK_FRAME]
 038  22038              HJGF: JUMP 038[HJGF]
 039               WR_DDR_RAM: 
 039  0B004                    FETCH s0[REG1], 04[ST_ADD_1]
 03A  2F00A                    STORE s0[REG1], 0A[BUFF_AD1]
 03B  0B005                    FETCH s0[REG1], 05[ST_ADD_2]
 03C  2F00B                    STORE s0[REG1], 0B[BUFF_AD2]
 03D  01000                    LOAD s0[REG1], 00
 03E  2F008                    STORE s0[REG1], 08[BT_CNT1]
 03F  2F009                    STORE s0[REG1], 09[BT_CNT2]
 040             TAKE_NXT_BYT: 
 040  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 041  1D244                    COMPARE s2[DDATA], 44["D"]
 042  32047                    JUMP Z, 047[WR_DDR]
 043  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 044  1D242                    COMPARE s2[DDATA], 42["B"]
 045  32049                    JUMP Z, 049[WR_BRAM]
 046  25000                    RETURN 
 047                   WR_DDR: 
 047  200C9                    CALL 0C9[WRITE_1_WORD_DDR]
 048  2204B                    JUMP 04B[NXT_LOOP]
 049                  WR_BRAM: 
 049  2009A                    CALL 09A[take_data_in_usb]
 04A  20078                    CALL 078[WR_BRAM_DATA]
 04B                 NXT_LOOP: 
 04B  0B708                    FETCH s7[CNTR1], 08[BT_CNT1]
 04C  0B809                    FETCH s8[CNTR2], 09[BT_CNT2]
 04D  11701                    ADD s7[CNTR1], 01
 04E  13800                    ADDCY s8[CNTR2], 00
 04F  2F708                    STORE s7[CNTR1], 08[BT_CNT1]
 050  2F809                    STORE s8[CNTR2], 09[BT_CNT2]
 051  0BA06                    FETCH sA[ADDR1], 06[N_OF_BYTE1]
 052  0BB07                    FETCH sB[ADDR2], 07[N_OF_BYTE2]
 053  1CA70                    COMPARE sA[ADDR1], s7[CNTR1]
 054  36040                    JUMP NZ, 040[TAKE_NXT_BYT]
 055  1CB80                    COMPARE sB[ADDR2], s8[CNTR2]
 056  36040                    JUMP NZ, 040[TAKE_NXT_BYT]
 057  25000                    RETURN 
 058               RD_DDR_RAM: 
 058  01000                    LOAD s0[REG1], 00
 059  2F008                    STORE s0[REG1], 08[BT_CNT1]
 05A  2F009                    STORE s0[REG1], 09[BT_CNT2]
 05B  0B004                    FETCH s0[REG1], 04[ST_ADD_1]
 05C  2F00A                    STORE s0[REG1], 0A[BUFF_AD1]
 05D  0B005                    FETCH s0[REG1], 05[ST_ADD_2]
 05E  2F00B                    STORE s0[REG1], 0B[BUFF_AD2]
 05F             SEND_NXT_BYT: 
 05F  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 060  1D244                    COMPARE s2[DDATA], 44["D"]
 061  32066                    JUMP Z, 066[RD_DDR]
 062  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 063  1D242                    COMPARE s2[DDATA], 42["B"]
 064  32068                    JUMP Z, 068[RD_BRAM]
 065  25000                    RETURN 
 066                   RD_DDR: 
 066  200DB                    CALL 0DB[READ_1_WORD_DDR]
 067                           ;FETCH     DDATA, BT_CNT2
 067                           ;CALL send_one_bt_usb
 067                           ;FETCH     DDATA, BT_CNT1
 067                           ;CALL send_one_bt_usb
 067  2206B                    JUMP 06B[NXT_LOOP1]
 068                  RD_BRAM: 
 068  2007B                    CALL 07B[INC_BRAM_ADDRESS]
 069  09205                    INPUT s2[DDATA], 05[BRAM_DATA_IN]
 06A  2008B                    CALL 08B[send_one_bt_usb]
 06B                NXT_LOOP1: 
 06B  0B708                    FETCH s7[CNTR1], 08[BT_CNT1]
 06C  0B809                    FETCH s8[CNTR2], 09[BT_CNT2]
 06D  11701                    ADD s7[CNTR1], 01
 06E  13800                    ADDCY s8[CNTR2], 00
 06F  2F708                    STORE s7[CNTR1], 08[BT_CNT1]
 070  2F809                    STORE s8[CNTR2], 09[BT_CNT2]
 071  0BA06                    FETCH sA[ADDR1], 06[N_OF_BYTE1]
 072  0BB07                    FETCH sB[ADDR2], 07[N_OF_BYTE2]
 073  1CA70                    COMPARE sA[ADDR1], s7[CNTR1]
 074  3605F                    JUMP NZ, 05F[SEND_NXT_BYT]
 075  1CB80                    COMPARE sB[ADDR2], s8[CNTR2]
 076  3605F                    JUMP NZ, 05F[SEND_NXT_BYT]
 077  25000                    RETURN 
 078             WR_BRAM_DATA: 
 078  2D205                    OUTPUT s2[DDATA], 05[BRAM_DATA_OUT]
 079  2007B                    CALL 07B[INC_BRAM_ADDRESS]
 07A  25000                    RETURN 
 07B  0BA0A  INC_BRAM_ADDRESS: FETCH sA[ADDR1], 0A[BUFF_AD1]
 07C  0BB0B                    FETCH sB[ADDR2], 0B[BUFF_AD2]
 07D  11A01                    ADD sA[ADDR1], 01
 07E  13B00                    ADDCY sB[ADDR2], 00
 07F  2DA06                    OUTPUT sA[ADDR1], 06[BRAM_ADR_70]
 080  2DB07                    OUTPUT sB[ADDR2], 07[BRAM_ADR_158]
 081  2FA0A                    STORE sA[ADDR1], 0A[BUFF_AD1]
 082  2FB0B                    STORE sB[ADDR2], 0B[BUFF_AD2]
 083  25000                    RETURN 
 084           CHK_DT_PRESENT: 
 084  09002                    INPUT s0[REG1], 02[RX_DT_RDY]
 085  1D001                    COMPARE s0[REG1], 01[00000001'b]
 086  36084                    JUMP NZ, 084[CHK_DT_PRESENT]
 087  2D004                    OUTPUT s0[REG1], 04[RD_PULSE]
 088  09003                    INPUT s0[REG1], 03[RX_DATA]
 089  2D001                    OUTPUT s0[REG1], 01[LED]
 08A  25000                    RETURN 
 08B          send_one_bt_usb: 
 08B               wr_rdy_chk: 
 08B  09003                    INPUT s0[REG1], 03[usb_txe]
 08C  0D001                    TEST s0[REG1], 01[00000001'b]
 08D  3608B                    JUMP NZ, 08B[wr_rdy_chk]
 08E  01000                    LOAD s0[REG1], 00
 08F  2D00A                    OUTPUT s0[REG1], 0A[USB_RD_WR]
 090  2D20B                    OUTPUT s2[DDATA], 0B[USB_DATA_OUT]
 091  01000                    LOAD s0[REG1], 00
 092  2D009                    OUTPUT s0[REG1], 09[usb_wr]
 093  010FF                    LOAD s0[REG1], FF
 094  010FF                    LOAD s0[REG1], FF
 095  010FF                    LOAD s0[REG1], FF
 096  2D009                    OUTPUT s0[REG1], 09[usb_wr]
 097                           ;call DELAY_107US
 097                           ;call DELAY_107US
 097  010FF                    LOAD s0[REG1], FF
 098  2D00A                    OUTPUT s0[REG1], 0A[USB_RD_WR]
 099  25000                    RETURN 
 09A         take_data_in_usb: 
 09A  09004                    INPUT s0[REG1], 04[usb_rxf]
 09B  0D001                    TEST s0[REG1], 01[00000001'b]
 09C  3609A                    JUMP NZ, 09A[take_data_in_usb]
 09D  010FF                    LOAD s0[REG1], FF
 09E  2D00A                    OUTPUT s0[REG1], 0A[USB_RD_WR]
 09F  2D00C                    OUTPUT s0[REG1], 0C[usb_rd]
 0A0  09202                    INPUT s2[DDATA], 02[USB_DATA_IN]
 0A1  25000                    RETURN 
 0A2                LED_BLINK: 
 0A2  19001               LP1: SUB s0[REG1], 01
 0A3  016AA                    LOAD s6[DATA], AA
 0A4  2D601                    OUTPUT s6[DATA], 01[LED]
 0A5  20134                    CALL 134[DELAY_20MS]
 0A6  20134                    CALL 134[DELAY_20MS]
 0A7  01655                    LOAD s6[DATA], 55
 0A8  2D601                    OUTPUT s6[DATA], 01[LED]
 0A9  20134                    CALL 134[DELAY_20MS]
 0AA  20134                    CALL 134[DELAY_20MS]
 0AB  20134                    CALL 134[DELAY_20MS]
 0AC  20134                    CALL 134[DELAY_20MS]
 0AD  1D000                    COMPARE s0[REG1], 00
 0AE  360A2                    JUMP NZ, 0A2[LP1]
 0AF  25000                    RETURN 
 0B0             DATA_OUT_DDR: 
 0B0  2009A                    CALL 09A[take_data_in_usb]
 0B1  2D20D                    OUTPUT s2[DDATA], 0D[DDR_DATA_W_31_24]
 0B2  2009A                    CALL 09A[take_data_in_usb]
 0B3  2D20E                    OUTPUT s2[DDATA], 0E[DDR_DATA_W_23_16]
 0B4  2009A                    CALL 09A[take_data_in_usb]
 0B5  2D20F                    OUTPUT s2[DDATA], 0F[DDR_DATA_W_15_8]
 0B6  2009A                    CALL 09A[take_data_in_usb]
 0B7  2D210                    OUTPUT s2[DDATA], 10[DDR_DATA_W_7_0]
 0B8  20128                    CALL 128[DELAY_10US]
 0B9  012FF                    LOAD s2[DDATA], FF
 0BA  012FF                    LOAD s2[DDATA], FF
 0BB  012FF                    LOAD s2[DDATA], FF
 0BC  012FF                    LOAD s2[DDATA], FF
 0BD  012FF                    LOAD s2[DDATA], FF
 0BE  012FF                    LOAD s2[DDATA], FF
 0BF  012FF                    LOAD s2[DDATA], FF
 0C0  2D212                    OUTPUT s2[DDATA], 12[WR_EN_PLS]
 0C1  01200                    LOAD s2[DDATA], 00
 0C2  01200                    LOAD s2[DDATA], 00
 0C3  01200                    LOAD s2[DDATA], 00
 0C4  01200                    LOAD s2[DDATA], 00
 0C5  01200                    LOAD s2[DDATA], 00
 0C6  01200                    LOAD s2[DDATA], 00
 0C7  2D212                    OUTPUT s2[DDATA], 12[WR_EN_PLS]
 0C8  25000                    RETURN 
 0C9         WRITE_1_WORD_DDR: 
 0C9  20128                    CALL 128[DELAY_10US]
 0CA  200B0                    CALL 0B0[DATA_OUT_DDR]
 0CB  200B0                    CALL 0B0[DATA_OUT_DDR]
 0CC  012FF                    LOAD s2[DDATA], FF
 0CD  2D211                    OUTPUT s2[DDATA], 11[CMD_WR_PLS]
 0CE  01200                    LOAD s2[DDATA], 00
 0CF  01200                    LOAD s2[DDATA], 00
 0D0  01200                    LOAD s2[DDATA], 00
 0D1  2D211                    OUTPUT s2[DDATA], 11[CMD_WR_PLS]
 0D2  01200                    LOAD s2[DDATA], 00
 0D3  01200                    LOAD s2[DDATA], 00
 0D4  012FF                    LOAD s2[DDATA], FF
 0D5  2D215                    OUTPUT s2[DDATA], 15[DDR_ADDRESS_INC_WR]
 0D6  01200                    LOAD s2[DDATA], 00
 0D7  01200                    LOAD s2[DDATA], 00
 0D8  01200                    LOAD s2[DDATA], 00
 0D9  2D215                    OUTPUT s2[DDATA], 15[DDR_ADDRESS_INC_WR]
 0DA  25000                    RETURN 
 0DB          READ_1_WORD_DDR: 
 0DB                           ;LOAD DDATA,01   ; READ cmd
 0DB                           ;OUTPUT DDATA,WR_RD_CMD  ; READ cmd
 0DB  012FF                    LOAD s2[DDATA], FF
 0DC  2D213                    OUTPUT s2[DDATA], 13[CMD_RD_PLS]
 0DD  01200                    LOAD s2[DDATA], 00
 0DE  01200                    LOAD s2[DDATA], 00
 0DF  01200                    LOAD s2[DDATA], 00
 0E0  2D213                    OUTPUT s2[DDATA], 13[CMD_RD_PLS]
 0E1                           ;WAIT_FOR_DATA1:  INPUT REG1,READ_EMPTY
 0E1                           ; COMPARE REG1,01
 0E1                           ; JUMP Z,WAIT_FOR_DATA1
 0E1  01200                    LOAD s2[DDATA], 00
 0E2  01200                    LOAD s2[DDATA], 00
 0E3  01200                    LOAD s2[DDATA], 00
 0E4  01200                    LOAD s2[DDATA], 00
 0E5  01200                    LOAD s2[DDATA], 00
 0E6  01200                    LOAD s2[DDATA], 00
 0E7  20128                    CALL 128[DELAY_10US]
 0E8  200F1                    CALL 0F1[DATA_IN_DDR]
 0E9  200F1                    CALL 0F1[DATA_IN_DDR]
 0EA  012FF                    LOAD s2[DDATA], FF
 0EB  2D21C                    OUTPUT s2[DDATA], 1C[DDR_ADDRESS_INC_RD]
 0EC  01200                    LOAD s2[DDATA], 00
 0ED  01200                    LOAD s2[DDATA], 00
 0EE  01200                    LOAD s2[DDATA], 00
 0EF  2D21C                    OUTPUT s2[DDATA], 1C[DDR_ADDRESS_INC_RD]
 0F0  25000                    RETURN 
 0F1              DATA_IN_DDR: 
 0F1  0900C     WAIT_FOR_DATA: INPUT s0[REG1], 0C[READ_EMPTY]
 0F2  1D001                    COMPARE s0[REG1], 01
 0F3  320F1                    JUMP Z, 0F1[WAIT_FOR_DATA]
 0F4                           ;CALL DELAY_1S
 0F4  00220                    LOAD s2[DDATA], s2[DDATA]
 0F5  00220                    LOAD s2[DDATA], s2[DDATA]
 0F6  00220                    LOAD s2[DDATA], s2[DDATA]
 0F7  00220                    LOAD s2[DDATA], s2[DDATA]
 0F8  00220                    LOAD s2[DDATA], s2[DDATA]
 0F9  09206                    INPUT s2[DDATA], 06[DDR_DATA_R_31_24]
 0FA  2008B                    CALL 08B[send_one_bt_usb]
 0FB  09207                    INPUT s2[DDATA], 07[DDR_DATA_R_23_16]
 0FC  2008B                    CALL 08B[send_one_bt_usb]
 0FD  09208                    INPUT s2[DDATA], 08[DDR_DATA_R_15_8]
 0FE  2008B                    CALL 08B[send_one_bt_usb]
 0FF  09209                    INPUT s2[DDATA], 09[DDR_DATA_R_7_0]
 100  2008B                    CALL 08B[send_one_bt_usb]
 101  012FF                    LOAD s2[DDATA], FF
 102  2D216                    OUTPUT s2[DDATA], 16[RD_EN_PLS]
 103  01200                    LOAD s2[DDATA], 00
 104  01200                    LOAD s2[DDATA], 00
 105  01200                    LOAD s2[DDATA], 00
 106  2D216                    OUTPUT s2[DDATA], 16[RD_EN_PLS]
 107  25000                    RETURN 
 108              REG_CONTROL: 
 108  0B203                    FETCH s2[DDATA], 03[CMD_WR_RD]
 109  1D257                    COMPARE s2[DDATA], 57["W"]
 10A  3210E                    JUMP Z, 10E[W_USER_REG]
 10B  1D252                    COMPARE s2[DDATA], 52["R"]
 10C  3211A                    JUMP Z, 11A[R_USER_REG]
 10D  2201C                    JUMP 01C[CHECK_FRAME]
 10E  0B205        W_USER_REG: FETCH s2[DDATA], 05[ST_ADD_2]
 10F  2D219                    OUTPUT s2[DDATA], 19[USER_REGADDR_15_8]
 110  0B204                    FETCH s2[DDATA], 04[ST_ADD_1]
 111  2D21A                    OUTPUT s2[DDATA], 1A[USER_REGADDR_7_0]
 112  0B207                    FETCH s2[DDATA], 07[N_OF_BYTE2]          ;; NOT USED
 113  0B206                    FETCH s2[DDATA], 06[N_OF_BYTE1]
 114  2D21B                    OUTPUT s2[DDATA], 1B[USER_REGDATAOUT]
 115  012FF                    LOAD s2[DDATA], FF
 116  2D208                    OUTPUT s2[DDATA], 08[USER_REGWE]         ;; WRITE ENABLE PULSE
 117  01200                    LOAD s2[DDATA], 00
 118  2D208                    OUTPUT s2[DDATA], 08[USER_REGWE]         ;; WRITE ENABLE PULSE
 119  2201C                    JUMP 01C[CHECK_FRAME]
 11A               R_USER_REG: 
 11A  0B205                    FETCH s2[DDATA], 05[ST_ADD_2]
 11B  2D219                    OUTPUT s2[DDATA], 19[USER_REGADDR_15_8]
 11C  0B204                    FETCH s2[DDATA], 04[ST_ADD_1]
 11D  2D21A                    OUTPUT s2[DDATA], 1A[USER_REGADDR_7_0]
 11E  0B207                    FETCH s2[DDATA], 07[N_OF_BYTE2]          ;; NOT USED
 11F  0B206                    FETCH s2[DDATA], 06[N_OF_BYTE1]          ;; NOT USED
 120  2D214                    OUTPUT s2[DDATA], 14[USER_REGRE]         ;; READ ENABLE PULSE
 121  01225                    LOAD s2[DDATA], 25["%"]
 122  2008B                    CALL 08B[send_one_bt_usb]
 123  0920D                    INPUT s2[DDATA], 0D[USER_REGDATAIN]
 124  2008B                    CALL 08B[send_one_bt_usb]
 125  01223                    LOAD s2[DDATA], 23["#"]
 126  2008B                    CALL 08B[send_one_bt_usb]
 127  2201C                    JUMP 01C[CHECK_FRAME]
 128                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ALL DELAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 128                           ;--
 128                           ;|1000000/416NS
 128                           ;|--------------------------===== CNT
 128                           ;|10
 128                           ;|--------
 128                           ; 10US IS 1000     (1000000/416 = 000018 HEX)   FOR 24MHZ
 128               DELAY_10US: 
 128  01F00                    LOAD sF, 00
 129  01E00                    LOAD sE, 00
 12A  01D18                    LOAD sD, 18
 12B  2213C                    JUMP 13C[SOFTWARE_DELAY]
 12C                           ; 10US IS 1000     (1000000/416 = 000101 HEX)   FOR 24MHZ
 12C              DELAY_107US: 
 12C  01F00                    LOAD sF, 00
 12D  01E01                    LOAD sE, 01
 12E  01D01                    LOAD sD, 01
 12F  2213C                    JUMP 13C[SOFTWARE_DELAY]
 130                           ; 1MS IS 1000     (1000/416 = 000963 HEX)   FOR 24MHZ
 130                DELAY_1MS: 
 130  01F00                    LOAD sF, 00
 131  01E09                    LOAD sE, 09
 132  01D63                    LOAD sD, 63
 133  2213C                    JUMP 13C[SOFTWARE_DELAY]
 134                           ;
 134                           ; 20MS IS 20,000  100NS  (20,000/416 = 00BBCD HEX)  FOR 24MHZ
 134  01F00        DELAY_20MS: LOAD sF, 00
 135  01E5D                    LOAD sE, 5D
 136  01DC9                    LOAD sD, C9
 137  2213C                    JUMP 13C[SOFTWARE_DELAY]
 138                           ;
 138                           ;
 138                           ; 1S IS 10,000,00 X 10NS      (1/416 = 24AE06 HEX)  FOR 24MHZ
 138  01F24          DELAY_1S: LOAD sF, 24
 139  01EAE                    LOAD sE, AE
 13A  01D06                    LOAD sD, 06
 13B  2213C                    JUMP 13C[SOFTWARE_DELAY]
 13C                           ;
 13C                           ; THE DELAY LOOP DECREMENTS [S2,S1,S0] UNTIL IT REACHES ZERO
 13C                           ; EACH DECREMENT CYCLE IS 5 INSTRUCTIONS WHICH IS 10 CLOCK CYCLES (416NS AT 24MHZ)
 13C  00DD0    SOFTWARE_DELAY: LOAD sD, sD                              ;PAD LOOP TO MAKE IT 10 CLOCK CYCLES (5 INSTRUCTIONS)
 13D  19D01                    SUB sD, 01[1'd]
 13E  1BE00                    SUBCY sE, 00[0'd]
 13F  1BF00                    SUBCY sF, 00[0'd]
 140  3613C                    JUMP NZ, 13C[SOFTWARE_DELAY]
 141  25000                    RETURN 
 142                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


All unused memory locations contain zero (equivalent to 'LOAD s0, s0')



List of PSM files that have been assembled

E:\pico_ddr_bram_ftdififo\pico_code\pico_code.psm



List of defined constants

 CONSTANT name       Value        Source PSM File

 timestamp_hours     01'd         
 timestamp_minutes   45'd         
 timestamp_seconds   11'd         
 datestamp_year      20'd         
 datestamp_month     8'd          
 datestamp_day       08'd         
 NUL                 00           
 BEL                 07           
 BS                  08           
 HT                  09           
 LF                  0A           
 VT                  0B           
 CR                  0D           
 ESC                 1B           
 DEL                 7F           
 DCS                 90           
 ST                  9C           
 RX_DT_RDY           02           pico_code.psm
 RX_DATA             03           pico_code.psm
 LED                 01           pico_code.psm
 TX_DATA             02           pico_code.psm
 TX_STB              03           pico_code.psm
 RD_PULSE            04           pico_code.psm
 USB_DATA_OUT        0B           pico_code.psm
 USB_DATA_IN         02           pico_code.psm
 USB_RD_WR           0A           pico_code.psm
 usb_rxf             04           pico_code.psm
 usb_txe             03           pico_code.psm
 usb_rd              0C           pico_code.psm
 usb_wr              09           pico_code.psm
 BRAM_DATA_IN        05           pico_code.psm
 BRAM_W              08           pico_code.psm
 BRAM_ADR_70         06           pico_code.psm
 BRAM_ADR_158        07           pico_code.psm
 BRAM_DATA_OUT       05           pico_code.psm
 DDR_DATA_W_31_24    13'd         pico_code.psm
 DDR_DATA_W_23_16    14'd         pico_code.psm
 DDR_DATA_W_15_8     15'd         pico_code.psm
 DDR_DATA_W_7_0      16'd         pico_code.psm
 CMD_WR_PLS          17'd         pico_code.psm
 WR_EN_PLS           18'd         pico_code.psm
 DDR_ADDRESS_INC_WR  21'd         pico_code.psm
 DDR_DATA_R_31_24    06'd         pico_code.psm
 DDR_DATA_R_23_16    07'd         pico_code.psm
 DDR_DATA_R_15_8     08'd         pico_code.psm
 DDR_DATA_R_7_0      09'd         pico_code.psm
 CMD_RD_PLS          19'd         pico_code.psm
 READ_EMPTY          12'd         pico_code.psm
 DDR_ADDRESS_INC_RD  28'd         pico_code.psm
 RD_EN_PLS           22'd         pico_code.psm
 DDR_ADDRESS_RESET_W 23'd         pico_code.psm
 DDR_ADDRESS_RESET_R 24'd         pico_code.psm
 USER_REGADDR_15_8   25'd         pico_code.psm
 USER_REGADDR_7_0    26'd         pico_code.psm
 USER_REGDATAOUT     27'd         pico_code.psm
 USER_REGWE          8'd          pico_code.psm
 USER_REGRE          20'd         pico_code.psm
 USER_REGDATAIN      13'd         pico_code.psm
 USER_READ_START     4'd          pico_code.psm
 USER_DDR_DATA1      1'd          pico_code.psm
 USER_DDR_DATA2      0'd          pico_code.psm
 USER_DDR_DATA3      15'd         pico_code.psm
 USER_DDR_DATA4      20'd         pico_code.psm
 USER_DDR_DATA5      17'd         pico_code.psm
 USER_DDR_DATA6      18'd         pico_code.psm
 USER_DDR_DATA7      19'd         pico_code.psm
 USER_DDR_DATA8      16'd         pico_code.psm
 UR_DATA_RAM         01           pico_code.psm
 DDR_BRAM            02           pico_code.psm
 CMD_WR_RD           03           pico_code.psm
 ST_ADD_1            04           pico_code.psm
 ST_ADD_2            05           pico_code.psm
 N_OF_BYTE1          06           pico_code.psm
 N_OF_BYTE2          07           pico_code.psm
 BT_CNT1             08           pico_code.psm
 BT_CNT2             09           pico_code.psm
 BUFF_AD1            0A           pico_code.psm
 BUFF_AD2            0B           pico_code.psm
 DELL1               36           pico_code.psm
 DELL2               37           pico_code.psm
 DELL3               38           pico_code.psm
 DELL4               39           pico_code.psm
 DELL5               3A           pico_code.psm
 DELL6               3B           pico_code.psm
 RDID_9F             9F           pico_code.psm
 WREN_06             06           pico_code.psm
 PP_02               02           pico_code.psm
 READ_03             03           pico_code.psm
 RDSR_05             05           pico_code.psm
 SE_D8               D8           pico_code.psm
 WRSR_01             01           pico_code.psm
 BE_C7               C7           pico_code.psm
 DELAY_1US_CONSTANT  0B           pico_code.psm



No TABLEs defined



List of text strings

 STRING name       String         Source PSM File

 KCPSM6_version$   "v2.70"        
 datestamp$        "08 Aug 2020"  
 timestamp$        "01:45:11"     



List of line labels

   Label              Addr  Source PSM File

   TEST_USER          003   pico_code.psm
 * RSER_RD_TEST       004   pico_code.psm
   CHECK_FRAME        01C   pico_code.psm
 * START              02E   pico_code.psm
   HJGF               038   pico_code.psm
   WR_DDR_RAM         039   pico_code.psm
   TAKE_NXT_BYT       040   pico_code.psm
   WR_DDR             047   pico_code.psm
   WR_BRAM            049   pico_code.psm
   NXT_LOOP           04B   pico_code.psm
   RD_DDR_RAM         058   pico_code.psm
   SEND_NXT_BYT       05F   pico_code.psm
   RD_DDR             066   pico_code.psm
   RD_BRAM            068   pico_code.psm
   NXT_LOOP1          06B   pico_code.psm
   WR_BRAM_DATA       078   pico_code.psm
   INC_BRAM_ADDRESS   07B   pico_code.psm
   CHK_DT_PRESENT     084   pico_code.psm
   send_one_bt_usb    08B   pico_code.psm
   wr_rdy_chk         08B   pico_code.psm
   take_data_in_usb   09A   pico_code.psm
 * LED_BLINK          0A2   pico_code.psm
   LP1                0A2   pico_code.psm
   DATA_OUT_DDR       0B0   pico_code.psm
   WRITE_1_WORD_DDR   0C9   pico_code.psm
   READ_1_WORD_DDR    0DB   pico_code.psm
   DATA_IN_DDR        0F1   pico_code.psm
   WAIT_FOR_DATA      0F1   pico_code.psm
   REG_CONTROL        108   pico_code.psm
   W_USER_REG         10E   pico_code.psm
   R_USER_REG         11A   pico_code.psm
   DELAY_10US         128   pico_code.psm
   DELAY_107US        12C   pico_code.psm
 * DELAY_1MS          130   pico_code.psm
   DELAY_20MS         134   pico_code.psm
 * DELAY_1S           138   pico_code.psm
   SOFTWARE_DELAY     13C   pico_code.psm

      * Line label has not been referenced in any instructions.
        Hint - This may indicate unused code that could be
               removed to reduce the size of this program.



Instruction usage statistics

 Instruction    Instances

 LOAD             81
 STAR              -

 AND               -
 OR                -
 XOR               -

 ADD               3
 ADDCY             3
 SUB               2
 SUBCY             2

 TEST              2
 TESTCY            -
 COMPARE          18
 COMPARECY         -

 SL0               -
 SL1               -
 SLX               -
 SLA               -
 RL                -
 SR0               -
 SR1               -
 SRX               -
 SRA               -
 RR                -

 REGBANK           -

 INPUT            20
 OUTPUT           40
 OUTPUTK           -

 STORE            29
 FETCH            29

 DISABLE           -
 ENABLE            -
 RETURNI           -

 JUMP             34
 JUMP@             -
 CALL             52
 CALL@             -
 RETURN           16
 LOAD&RETURN       -

 HWBUILD           -



End of KCPSM6 log file.
