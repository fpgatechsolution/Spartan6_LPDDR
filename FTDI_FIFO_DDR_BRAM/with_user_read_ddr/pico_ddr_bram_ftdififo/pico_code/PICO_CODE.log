KCPSM6 Assembler log file for program 'E:\sanu\pico_ddr_bram_ftdififo\pico_code\PICO_CODE.psm'.
Generated by KCPSM6 version v2.70
Ken Chapman - Xilinx Ltd - 16th May 2014

Assembly datestamp: 11 Aug 2020
Assembly timestamp: 17:54:17

Contents
  Assembly listing
  List of PSM files
  List of CONSTANTs
  List of TABLEs
  List of STRINGs
  List of line labels
  Instruction usage statistics


Last occupied address: 11F hex
Nominal program memory size: 1K (1024)   address(9:0)
Actual memory size: 4096
  (Default memory size)
Occupied memory locations: 288
Memory locations available: 3808


Assembly listing

 Addr Code                     Instruction

 000                           ;NAMEREG S1,
 000                           ;NAMEREG S2,HH
 000                           ;NAMEREG S3,TOGL_REG
 000                           NAMEREG s0, REG1
 000                           NAMEREG s1, REG2
 000                           NAMEREG s2, DDATA
 000                           NAMEREG s3, REG
 000                           NAMEREG s4, REG4
 000                           NAMEREG s5, TEMP
 000                           NAMEREG s6, DATA
 000                           NAMEREG s7, CNTR1
 000                           NAMEREG s8, CNTR2
 000                           NAMEREG s9, SPI_REG
 000                           NAMEREG sA, ADDR1                        ; LSB ADDRES
 000                           NAMEREG sB, ADDR2
 000                           NAMEREG sC, ADDR3
 000                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 000                           ;--------------------------------------------------
 000                           CONSTANT RX_DT_RDY, 02                   ;////// INPUT
 000                           CONSTANT RX_DATA, 03                     ;////// INPUT
 000                           CONSTANT LED, 01
 000                           CONSTANT TX_DATA, 02
 000                           CONSTANT TX_STB, 03
 000                           CONSTANT RD_PULSE, 04
 000                           ;//USB
 000                           CONSTANT USB_DATA_OUT, 0B                ;;DSOUT     2
 000                           CONSTANT USB_DATA_IN, 02                 ;;DSIN      1
 000                           CONSTANT USB_RD_WR, 0A                   ;;DSOUT     3
 000                           CONSTANT usb_rxf, 04                     ;;DSIN      3
 000                           CONSTANT usb_txe, 03                     ;;DSIN      2
 000                           CONSTANT usb_rd, 0C                      ;;DSOUT     1
 000                           CONSTANT usb_wr, 09                      ;;DSOUT     4
 000                           ;// BRAM
 000                           CONSTANT BRAM_DATA_IN, 05                ;;DSIN      1
 000                           CONSTANT BRAM_W, 08                      ;;DSOUT     1
 000                           CONSTANT BRAM_ADR_70, 06                 ;;DSOUT     1
 000                           CONSTANT BRAM_ADR_158, 07                ;;DSOUT
 000                           CONSTANT BRAM_DATA_OUT, 05               ;;DSOUT
 000                           ;//////////ddr write
 000                           CONSTANT DDR_DATA_W_31_24, 13'd          ;;DSOUT
 000                           CONSTANT DDR_DATA_W_23_16, 14'd          ;;DSOUT
 000                           CONSTANT DDR_DATA_W_15_8, 15'd           ;;DSOUT
 000                           CONSTANT DDR_DATA_W_7_0, 16'd            ;;DSOUT
 000                           CONSTANT CMD_WR_PLS, 17'd                ;;DSOUT
 000                           CONSTANT WR_EN_PLS, 18'd                 ;;DSOUT
 000                           CONSTANT DDR_ADDRESS_INC_WR, 21'd        ;;DSOUT
 000                           ;CONSTANT    WR_RD_CMD        , 19'd ;;DSOUT  ;;;0 for write 1 for read
 000                           ;//////////ddr_read
 000                           CONSTANT DDR_DATA_R_31_24, 06'd          ;;DSIN
 000                           CONSTANT DDR_DATA_R_23_16, 07'd          ;;DSIN
 000                           CONSTANT DDR_DATA_R_15_8, 08'd           ;;DSIN
 000                           CONSTANT DDR_DATA_R_7_0, 09'd            ;;DSIN
 000                           CONSTANT CMD_RD_PLS, 19'd                ;;DSOUT
 000                           CONSTANT READ_EMPTY, 12'd                ;;DSIN
 000                           CONSTANT DDR_ADDRESS_INC_RD, 28'd        ;;DSOUT  ;;;;;;;;;;;;;;;;;;;;;;
 000                           CONSTANT RD_EN_PLS, 22'd                 ;;DSOUT
 000                           ;CONSTANT    DDR_ADDRESS_INC_PLS  , 21'd ;;DSOUT  ;;;;;;;;;;;;;;;;;;;
 000                           CONSTANT DDR_ADDRESS_RESET_W, 23'd       ;;DSOUT
 000                           CONSTANT DDR_ADDRESS_RESET_R, 24'd       ;;DSOUT
 000                           ;*************************
 000                           ;; SCRATCHPAD MEMORY
 000                           ;*************************
 000                           ;;;;;;Register interface
 000                           CONSTANT USER_REGADDR_15_8, 25'd         ;;DSOUT
 000                           CONSTANT USER_REGADDR_7_0, 26'd          ;;DSOUT
 000                           CONSTANT USER_REGDATAOUT, 27'd           ;;DSOUT
 000                           CONSTANT USER_REGWE, 8'd                 ;;DSOUT
 000                           CONSTANT USER_REGRE, 20'd                ;;DSOUT
 000                           CONSTANT USER_REGDATAIN, 13'd            ;;DSIN
 000                           ;;;;;;;;;;;;
 000                           CONSTANT USER_READ_START, 4'd            ;;DSOUT
 000                           CONSTANT USER_DDR_DATA1, 1'd             ;;DSIN
 000                           CONSTANT USER_DDR_DATA2, 0'd             ;;DSIN
 000                           CONSTANT USER_DDR_DATA3, 15'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA4, 20'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA5, 17'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA6, 18'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA7, 19'd            ;;DSIN
 000                           CONSTANT USER_DDR_DATA8, 16'd            ;;DSIN
 000                           CONSTANT UR_DATA_RAM, 01
 000                           CONSTANT DDR_BRAM, 02
 000                           CONSTANT CMD_WR_RD, 03
 000                           CONSTANT ST_ADD_1, 04
 000                           CONSTANT ST_ADD_2, 05
 000                           CONSTANT N_OF_BYTE1, 06
 000                           CONSTANT N_OF_BYTE2, 07
 000                           CONSTANT BT_CNT1, 08
 000                           CONSTANT BT_CNT2, 09
 000                           CONSTANT BUFF_AD1, 0A
 000                           CONSTANT BUFF_AD2, 0B
 000                           ;CONSTANT UR_DATA_RAM,01
 000                           ;CONSTANT UR_DATA_RAM,01
 000                           ;CONSTANT UR_DATA_RAM,01
 000                           CONSTANT DELL1, 36
 000                           CONSTANT DELL2, 37
 000                           CONSTANT DELL3, 38
 000                           CONSTANT DELL4, 39
 000                           CONSTANT DELL5, 3A
 000                           CONSTANT DELL6, 3B
 000                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 000                           CONSTANT RDID_9F, 9F
 000                           CONSTANT WREN_06, 06
 000                           CONSTANT PP_02, 02
 000                           CONSTANT READ_03, 03
 000                           CONSTANT RDSR_05, 05
 000                           CONSTANT SE_D8, D8
 000                           CONSTANT WRSR_01, 01
 000                           CONSTANT BE_C7, C7
 000                           CONSTANT DELAY_1US_CONSTANT, 0B          ;CONSTANT VALUE FOR DELAY RUTNS
 000  01200                    LOAD s2[DDATA], 00
 001  2008B                    CALL 08B[send_one_bt_usb]
 002  2201C                    JUMP 01C[CHECK_FRAME]
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003                           ;CALL RSER_RD_TEST
 003  22003         TEST_USER: JUMP 003[TEST_USER]
 004             RSER_RD_TEST: 
 004  012FF                    LOAD s2[DDATA], FF
 005  2D204                    OUTPUT s2[DDATA], 04[USER_READ_START]
 006  01200                    LOAD s2[DDATA], 00
 007  2D204                    OUTPUT s2[DDATA], 04[USER_READ_START]
 008  09214                    INPUT s2[DDATA], 14[USER_DDR_DATA4]
 009                           ;load  DDATA,38
 009  2008B                    CALL 08B[send_one_bt_usb]
 00A  0920F                    INPUT s2[DDATA], 0F[USER_DDR_DATA3]
 00B  2008B                    CALL 08B[send_one_bt_usb]
 00C  09200                    INPUT s2[DDATA], 00[USER_DDR_DATA2]
 00D  2008B                    CALL 08B[send_one_bt_usb]
 00E  09201                    INPUT s2[DDATA], 01[USER_DDR_DATA1]
 00F  2008B                    CALL 08B[send_one_bt_usb]
 010  09211                    INPUT s2[DDATA], 11[USER_DDR_DATA5]
 011  2008B                    CALL 08B[send_one_bt_usb]
 012  09212                    INPUT s2[DDATA], 12[USER_DDR_DATA6]
 013  2008B                    CALL 08B[send_one_bt_usb]
 014  09213                    INPUT s2[DDATA], 13[USER_DDR_DATA7]
 015  2008B                    CALL 08B[send_one_bt_usb]
 016  09210                    INPUT s2[DDATA], 10[USER_DDR_DATA8]
 017  2008B                    CALL 08B[send_one_bt_usb]
 018  2010A                    CALL 10A[DELAY_107US]
 019  01220                    LOAD s2[DDATA], 20
 01A  2008B                    CALL 08B[send_one_bt_usb]
 01B  25000                    RETURN 
 01C                           ;$ G 12 04 R/W # DATA
 01C              CHECK_FRAME: ;$ D/B 12 34 R/W #** DATA
 01C  20097                    CALL 097[take_data_in_usb]
 01D  1D224                    COMPARE s2[DDATA], 24["$"]
 01E  3601C                    JUMP NZ, 01C[CHECK_FRAME]
 01F  20097                    CALL 097[take_data_in_usb]
 020  2F202                    STORE s2[DDATA], 02[DDR_BRAM]
 021  20097                    CALL 097[take_data_in_usb]               ;START ADDR1
 022  2F205                    STORE s2[DDATA], 05[ST_ADD_2]
 023  20097                    CALL 097[take_data_in_usb]               ;START ADDR2
 024  2F204                    STORE s2[DDATA], 04[ST_ADD_1]
 025  20097                    CALL 097[take_data_in_usb]               ;NO OF BYTES1
 026  2F207                    STORE s2[DDATA], 07[N_OF_BYTE2]
 027  20097                    CALL 097[take_data_in_usb]               ;;NO OF BYTES2;;;;;7 TO 0
 028  2F206                    STORE s2[DDATA], 06[N_OF_BYTE1]
 029  20097                    CALL 097[take_data_in_usb]
 02A  2F203                    STORE s2[DDATA], 03[CMD_WR_RD]
 02B  20097                    CALL 097[take_data_in_usb]
 02C  1D223                    COMPARE s2[DDATA], 23["#"]
 02D  3601C                    JUMP NZ, 01C[CHECK_FRAME]
 02E                    START: 
 02E                           ; FETCH DDATA,N_OF_BYTE2
 02E                           ; CALL send_one_bt_usb
 02E                           ; FETCH DDATA,N_OF_BYTE1
 02E                           ; CALL send_one_bt_usb
 02E  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 02F  1D247                    COMPARE s2[DDATA], 47["G"]
 030  320E8                    JUMP Z, 0E8[REG_CONTROL]
 031  0B203                    FETCH s2[DDATA], 03[CMD_WR_RD]
 032  1D252                    COMPARE s2[DDATA], 52["R"]
 033  30058                    CALL Z, 058[RD_DDR_RAM]
 034  1D257                    COMPARE s2[DDATA], 57["W"]
 035  30039                    CALL Z, 039[WR_DDR_RAM]
 036  2201C                    JUMP 01C[CHECK_FRAME]
 037                           ;
 037  2201C                    JUMP 01C[CHECK_FRAME]
 038  22038              HJGF: JUMP 038[HJGF]
 039               WR_DDR_RAM: 
 039  0B004                    FETCH s0[REG1], 04[ST_ADD_1]
 03A  2F00A                    STORE s0[REG1], 0A[BUFF_AD1]
 03B  0B005                    FETCH s0[REG1], 05[ST_ADD_2]
 03C  2F00B                    STORE s0[REG1], 0B[BUFF_AD2]
 03D  01000                    LOAD s0[REG1], 00
 03E  2F008                    STORE s0[REG1], 08[BT_CNT1]
 03F  2F009                    STORE s0[REG1], 09[BT_CNT2]
 040             TAKE_NXT_BYT: 
 040  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 041  1D244                    COMPARE s2[DDATA], 44["D"]
 042  32047                    JUMP Z, 047[WR_DDR]
 043  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 044  1D242                    COMPARE s2[DDATA], 42["B"]
 045  32049                    JUMP Z, 049[WR_BRAM]
 046  25000                    RETURN 
 047                   WR_DDR: 
 047  200AB                    CALL 0AB[WRITE_1_WORD_DDR]
 048  2204B                    JUMP 04B[NXT_LOOP]
 049                  WR_BRAM: 
 049  20097                    CALL 097[take_data_in_usb]
 04A  20078                    CALL 078[WR_BRAM_DATA]
 04B                 NXT_LOOP: 
 04B  0B708                    FETCH s7[CNTR1], 08[BT_CNT1]
 04C  0B809                    FETCH s8[CNTR2], 09[BT_CNT2]
 04D  11701                    ADD s7[CNTR1], 01
 04E  13800                    ADDCY s8[CNTR2], 00
 04F  2F708                    STORE s7[CNTR1], 08[BT_CNT1]
 050  2F809                    STORE s8[CNTR2], 09[BT_CNT2]
 051  0BA06                    FETCH sA[ADDR1], 06[N_OF_BYTE1]
 052  0BB07                    FETCH sB[ADDR2], 07[N_OF_BYTE2]
 053  1CA70                    COMPARE sA[ADDR1], s7[CNTR1]
 054  36040                    JUMP NZ, 040[TAKE_NXT_BYT]
 055  1CB80                    COMPARE sB[ADDR2], s8[CNTR2]
 056  36040                    JUMP NZ, 040[TAKE_NXT_BYT]
 057  25000                    RETURN 
 058               RD_DDR_RAM: 
 058  01000                    LOAD s0[REG1], 00
 059  2F008                    STORE s0[REG1], 08[BT_CNT1]
 05A  2F009                    STORE s0[REG1], 09[BT_CNT2]
 05B  0B004                    FETCH s0[REG1], 04[ST_ADD_1]
 05C  2F00A                    STORE s0[REG1], 0A[BUFF_AD1]
 05D  0B005                    FETCH s0[REG1], 05[ST_ADD_2]
 05E  2F00B                    STORE s0[REG1], 0B[BUFF_AD2]
 05F             SEND_NXT_BYT: 
 05F  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 060  1D244                    COMPARE s2[DDATA], 44["D"]
 061  32066                    JUMP Z, 066[RD_DDR]
 062  0B202                    FETCH s2[DDATA], 02[DDR_BRAM]
 063  1D242                    COMPARE s2[DDATA], 42["B"]
 064  32068                    JUMP Z, 068[RD_BRAM]
 065  25000                    RETURN 
 066                   RD_DDR: 
 066  200CD                    CALL 0CD[READ_1_WORD_DDR]
 067                           ;FETCH     DDATA, BT_CNT2
 067                           ;CALL send_one_bt_usb
 067                           ;FETCH     DDATA, BT_CNT1
 067                           ;CALL send_one_bt_usb
 067  2206B                    JUMP 06B[NXT_LOOP1]
 068                  RD_BRAM: 
 068  2007B                    CALL 07B[INC_BRAM_ADDRESS]
 069  09205                    INPUT s2[DDATA], 05[BRAM_DATA_IN]
 06A  2008B                    CALL 08B[send_one_bt_usb]
 06B                NXT_LOOP1: 
 06B  0B708                    FETCH s7[CNTR1], 08[BT_CNT1]
 06C  0B809                    FETCH s8[CNTR2], 09[BT_CNT2]
 06D  11701                    ADD s7[CNTR1], 01
 06E  13800                    ADDCY s8[CNTR2], 00
 06F  2F708                    STORE s7[CNTR1], 08[BT_CNT1]
 070  2F809                    STORE s8[CNTR2], 09[BT_CNT2]
 071  0BA06                    FETCH sA[ADDR1], 06[N_OF_BYTE1]
 072  0BB07                    FETCH sB[ADDR2], 07[N_OF_BYTE2]
 073  1CA70                    COMPARE sA[ADDR1], s7[CNTR1]
 074  3605F                    JUMP NZ, 05F[SEND_NXT_BYT]
 075  1CB80                    COMPARE sB[ADDR2], s8[CNTR2]
 076  3605F                    JUMP NZ, 05F[SEND_NXT_BYT]
 077  25000                    RETURN 
 078             WR_BRAM_DATA: 
 078  2D205                    OUTPUT s2[DDATA], 05[BRAM_DATA_OUT]
 079  2007B                    CALL 07B[INC_BRAM_ADDRESS]
 07A  25000                    RETURN 
 07B  0BA0A  INC_BRAM_ADDRESS: FETCH sA[ADDR1], 0A[BUFF_AD1]
 07C  0BB0B                    FETCH sB[ADDR2], 0B[BUFF_AD2]
 07D  11A01                    ADD sA[ADDR1], 01
 07E  13B00                    ADDCY sB[ADDR2], 00
 07F  2DA06                    OUTPUT sA[ADDR1], 06[BRAM_ADR_70]
 080  2DB07                    OUTPUT sB[ADDR2], 07[BRAM_ADR_158]
 081  2FA0A                    STORE sA[ADDR1], 0A[BUFF_AD1]
 082  2FB0B                    STORE sB[ADDR2], 0B[BUFF_AD2]
 083  25000                    RETURN 
 084           CHK_DT_PRESENT: 
 084  09002                    INPUT s0[REG1], 02[RX_DT_RDY]
 085  1D001                    COMPARE s0[REG1], 01[00000001'b]
 086  36084                    JUMP NZ, 084[CHK_DT_PRESENT]
 087  2D004                    OUTPUT s0[REG1], 04[RD_PULSE]
 088  09003                    INPUT s0[REG1], 03[RX_DATA]
 089  2D001                    OUTPUT s0[REG1], 01[LED]
 08A  25000                    RETURN 
 08B          send_one_bt_usb: 
 08B               wr_rdy_chk: 
 08B  09003                    INPUT s0[REG1], 03[usb_txe]
 08C  0D001                    TEST s0[REG1], 01[00000001'b]
 08D  3608B                    JUMP NZ, 08B[wr_rdy_chk]
 08E  01000                    LOAD s0[REG1], 00
 08F  2D00A                    OUTPUT s0[REG1], 0A[USB_RD_WR]
 090  2D20B                    OUTPUT s2[DDATA], 0B[USB_DATA_OUT]
 091  01000                    LOAD s0[REG1], 00
 092  2D009                    OUTPUT s0[REG1], 09[usb_wr]
 093  010FF                    LOAD s0[REG1], FF
 094  2D009                    OUTPUT s0[REG1], 09[usb_wr]
 095  2D00A                    OUTPUT s0[REG1], 0A[USB_RD_WR]
 096  25000                    RETURN 
 097         take_data_in_usb: 
 097  09004                    INPUT s0[REG1], 04[usb_rxf]
 098  0D001                    TEST s0[REG1], 01[00000001'b]
 099  36097                    JUMP NZ, 097[take_data_in_usb]
 09A                           ;LOAD      REG1, FF
 09A                           ;OUTPUT    REG1, USB_RD_WR
 09A  2D00C                    OUTPUT s0[REG1], 0C[usb_rd]
 09B  09202                    INPUT s2[DDATA], 02[USB_DATA_IN]
 09C  25000                    RETURN 
 09D                LED_BLINK: 
 09D  19001               LP1: SUB s0[REG1], 01
 09E  016AA                    LOAD s6[DATA], AA
 09F  2D601                    OUTPUT s6[DATA], 01[LED]
 0A0  20112                    CALL 112[DELAY_20MS]
 0A1  20112                    CALL 112[DELAY_20MS]
 0A2  01655                    LOAD s6[DATA], 55
 0A3  2D601                    OUTPUT s6[DATA], 01[LED]
 0A4  20112                    CALL 112[DELAY_20MS]
 0A5  20112                    CALL 112[DELAY_20MS]
 0A6  20112                    CALL 112[DELAY_20MS]
 0A7  20112                    CALL 112[DELAY_20MS]
 0A8  1D000                    COMPARE s0[REG1], 00
 0A9  3609D                    JUMP NZ, 09D[LP1]
 0AA  25000                    RETURN 
 0AB         WRITE_1_WORD_DDR: 
 0AB  20097                    CALL 097[take_data_in_usb]
 0AC  2D20D                    OUTPUT s2[DDATA], 0D[DDR_DATA_W_31_24]
 0AD  20097                    CALL 097[take_data_in_usb]
 0AE  2D20E                    OUTPUT s2[DDATA], 0E[DDR_DATA_W_23_16]
 0AF  20097                    CALL 097[take_data_in_usb]
 0B0  2D20F                    OUTPUT s2[DDATA], 0F[DDR_DATA_W_15_8]
 0B1  20097                    CALL 097[take_data_in_usb]
 0B2  2D210                    OUTPUT s2[DDATA], 10[DDR_DATA_W_7_0]
 0B3  012FF                    LOAD s2[DDATA], FF
 0B4  2D212                    OUTPUT s2[DDATA], 12[WR_EN_PLS]
 0B5  01200                    LOAD s2[DDATA], 00
 0B6  01200                    LOAD s2[DDATA], 00
 0B7  2D212                    OUTPUT s2[DDATA], 12[WR_EN_PLS]
 0B8  20097                    CALL 097[take_data_in_usb]
 0B9  2D20D                    OUTPUT s2[DDATA], 0D[DDR_DATA_W_31_24]
 0BA  20097                    CALL 097[take_data_in_usb]
 0BB  2D20E                    OUTPUT s2[DDATA], 0E[DDR_DATA_W_23_16]
 0BC  20097                    CALL 097[take_data_in_usb]
 0BD  2D20F                    OUTPUT s2[DDATA], 0F[DDR_DATA_W_15_8]
 0BE  20097                    CALL 097[take_data_in_usb]
 0BF  2D210                    OUTPUT s2[DDATA], 10[DDR_DATA_W_7_0]
 0C0  012FF                    LOAD s2[DDATA], FF
 0C1  2D212                    OUTPUT s2[DDATA], 12[WR_EN_PLS]
 0C2  01200                    LOAD s2[DDATA], 00
 0C3                           ;LOAD DDATA,00
 0C3  2D212                    OUTPUT s2[DDATA], 12[WR_EN_PLS]
 0C4  012FF                    LOAD s2[DDATA], FF
 0C5  2D211                    OUTPUT s2[DDATA], 11[CMD_WR_PLS]
 0C6  01200                    LOAD s2[DDATA], 00
 0C7                           ;LOAD DDATA,00
 0C7  2D211                    OUTPUT s2[DDATA], 11[CMD_WR_PLS]
 0C8  012FF                    LOAD s2[DDATA], FF
 0C9  2D215                    OUTPUT s2[DDATA], 15[DDR_ADDRESS_INC_WR]
 0CA  01200                    LOAD s2[DDATA], 00
 0CB                           ;LOAD DDATA,00
 0CB  2D215                    OUTPUT s2[DDATA], 15[DDR_ADDRESS_INC_WR]
 0CC  25000                    RETURN 
 0CD          READ_1_WORD_DDR: 
 0CD  012FF                    LOAD s2[DDATA], FF
 0CE  2D213                    OUTPUT s2[DDATA], 13[CMD_RD_PLS]
 0CF  01200                    LOAD s2[DDATA], 00
 0D0                           ;LOAD DDATA,00
 0D0  2D213                    OUTPUT s2[DDATA], 13[CMD_RD_PLS]
 0D1  200D8                    CALL 0D8[DATA_IN_DDR]
 0D2  200D8                    CALL 0D8[DATA_IN_DDR]
 0D3  012FF                    LOAD s2[DDATA], FF
 0D4  2D21C                    OUTPUT s2[DDATA], 1C[DDR_ADDRESS_INC_RD]
 0D5  01200                    LOAD s2[DDATA], 00
 0D6                           ;LOAD DDATA,00
 0D6  2D21C                    OUTPUT s2[DDATA], 1C[DDR_ADDRESS_INC_RD]
 0D7  25000                    RETURN 
 0D8              DATA_IN_DDR: 
 0D8  0900C     WAIT_FOR_DATA: INPUT s0[REG1], 0C[READ_EMPTY]
 0D9  1D001                    COMPARE s0[REG1], 01
 0DA  320D8                    JUMP Z, 0D8[WAIT_FOR_DATA]
 0DB  09206                    INPUT s2[DDATA], 06[DDR_DATA_R_31_24]
 0DC  2008B                    CALL 08B[send_one_bt_usb]
 0DD  09207                    INPUT s2[DDATA], 07[DDR_DATA_R_23_16]
 0DE  2008B                    CALL 08B[send_one_bt_usb]
 0DF  09208                    INPUT s2[DDATA], 08[DDR_DATA_R_15_8]
 0E0  2008B                    CALL 08B[send_one_bt_usb]
 0E1  09209                    INPUT s2[DDATA], 09[DDR_DATA_R_7_0]
 0E2  2008B                    CALL 08B[send_one_bt_usb]
 0E3  012FF                    LOAD s2[DDATA], FF
 0E4  2D216                    OUTPUT s2[DDATA], 16[RD_EN_PLS]
 0E5  01200                    LOAD s2[DDATA], 00
 0E6                           ;LOAD DDATA,00
 0E6                           ;LOAD DDATA,00
 0E6  2D216                    OUTPUT s2[DDATA], 16[RD_EN_PLS]
 0E7  25000                    RETURN 
 0E8              REG_CONTROL: 
 0E8  0B203                    FETCH s2[DDATA], 03[CMD_WR_RD]
 0E9  1D257                    COMPARE s2[DDATA], 57["W"]
 0EA  320EE                    JUMP Z, 0EE[W_USER_REG]
 0EB  1D252                    COMPARE s2[DDATA], 52["R"]
 0EC  320FA                    JUMP Z, 0FA[R_USER_REG]
 0ED  2201C                    JUMP 01C[CHECK_FRAME]
 0EE  0B205        W_USER_REG: FETCH s2[DDATA], 05[ST_ADD_2]
 0EF  2D219                    OUTPUT s2[DDATA], 19[USER_REGADDR_15_8]
 0F0  0B204                    FETCH s2[DDATA], 04[ST_ADD_1]
 0F1  2D21A                    OUTPUT s2[DDATA], 1A[USER_REGADDR_7_0]
 0F2  0B207                    FETCH s2[DDATA], 07[N_OF_BYTE2]          ;; NOT USED
 0F3  0B206                    FETCH s2[DDATA], 06[N_OF_BYTE1]
 0F4  2D21B                    OUTPUT s2[DDATA], 1B[USER_REGDATAOUT]
 0F5  012FF                    LOAD s2[DDATA], FF
 0F6  2D208                    OUTPUT s2[DDATA], 08[USER_REGWE]         ;; WRITE ENABLE PULSE
 0F7  01200                    LOAD s2[DDATA], 00
 0F8  2D208                    OUTPUT s2[DDATA], 08[USER_REGWE]         ;; WRITE ENABLE PULSE
 0F9  2201C                    JUMP 01C[CHECK_FRAME]
 0FA               R_USER_REG: 
 0FA  0B205                    FETCH s2[DDATA], 05[ST_ADD_2]
 0FB  2D219                    OUTPUT s2[DDATA], 19[USER_REGADDR_15_8]
 0FC  0B204                    FETCH s2[DDATA], 04[ST_ADD_1]
 0FD  2D21A                    OUTPUT s2[DDATA], 1A[USER_REGADDR_7_0]
 0FE                           ;FETCH DDATA,N_OF_BYTE2 ;; NOT USED
 0FE                           ;FETCH DDATA,N_OF_BYTE1 ;; NOT USED
 0FE  2D214                    OUTPUT s2[DDATA], 14[USER_REGRE]         ;; READ ENABLE PULSE
 0FF  01225                    LOAD s2[DDATA], 25["%"]
 100  2008B                    CALL 08B[send_one_bt_usb]
 101  0920D                    INPUT s2[DDATA], 0D[USER_REGDATAIN]
 102  2008B                    CALL 08B[send_one_bt_usb]
 103  01223                    LOAD s2[DDATA], 23["#"]
 104  2008B                    CALL 08B[send_one_bt_usb]
 105  2201C                    JUMP 01C[CHECK_FRAME]
 106                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ALL DELAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 106                           ;--
 106                           ;|1000000/416NS
 106                           ;|--------------------------===== CNT
 106                           ;|10
 106                           ;|--------
 106                           ; 10US IS 1000     (1000000/416 = 000018 HEX)   FOR 24MHZ
 106               DELAY_10US: 
 106  01F00                    LOAD sF, 00
 107  01E00                    LOAD sE, 00
 108  01D18                    LOAD sD, 18
 109  2211A                    JUMP 11A[SOFTWARE_DELAY]
 10A                           ; 10US IS 1000     (1000000/416 = 000101 HEX)   FOR 24MHZ
 10A              DELAY_107US: 
 10A  01F00                    LOAD sF, 00
 10B  01E01                    LOAD sE, 01
 10C  01D01                    LOAD sD, 01
 10D  2211A                    JUMP 11A[SOFTWARE_DELAY]
 10E                           ; 1MS IS 1000     (1000/416 = 000963 HEX)   FOR 24MHZ
 10E                DELAY_1MS: 
 10E  01F00                    LOAD sF, 00
 10F  01E09                    LOAD sE, 09
 110  01D63                    LOAD sD, 63
 111  2211A                    JUMP 11A[SOFTWARE_DELAY]
 112                           ;
 112                           ; 20MS IS 20,000  100NS  (20,000/416 = 00BBCD HEX)  FOR 24MHZ
 112  01F00        DELAY_20MS: LOAD sF, 00
 113  01E5D                    LOAD sE, 5D
 114  01DC9                    LOAD sD, C9
 115  2211A                    JUMP 11A[SOFTWARE_DELAY]
 116                           ;
 116                           ;
 116                           ; 1S IS 10,000,00 X 10NS      (1/416 = 24AE06 HEX)  FOR 24MHZ
 116  01F24          DELAY_1S: LOAD sF, 24
 117  01EAE                    LOAD sE, AE
 118  01D06                    LOAD sD, 06
 119  2211A                    JUMP 11A[SOFTWARE_DELAY]
 11A                           ;
 11A                           ; THE DELAY LOOP DECREMENTS [S2,S1,S0] UNTIL IT REACHES ZERO
 11A                           ; EACH DECREMENT CYCLE IS 5 INSTRUCTIONS WHICH IS 10 CLOCK CYCLES (416NS AT 24MHZ)
 11A  00DD0    SOFTWARE_DELAY: LOAD sD, sD                              ;PAD LOOP TO MAKE IT 10 CLOCK CYCLES (5 INSTRUCTIONS)
 11B  19D01                    SUB sD, 01[1'd]
 11C  1BE00                    SUBCY sE, 00[0'd]
 11D  1BF00                    SUBCY sF, 00[0'd]
 11E  3611A                    JUMP NZ, 11A[SOFTWARE_DELAY]
 11F  25000                    RETURN 
 120                           ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


All unused memory locations contain zero (equivalent to 'LOAD s0, s0')



List of PSM files that have been assembled

E:\sanu\pico_ddr_bram_ftdififo\pico_code\PICO_CODE.psm



List of defined constants

 CONSTANT name       Value        Source PSM File

 timestamp_hours     17'd         
 timestamp_minutes   54'd         
 timestamp_seconds   17'd         
 datestamp_year      20'd         
 datestamp_month     8'd          
 datestamp_day       11'd         
 NUL                 00           
 BEL                 07           
 BS                  08           
 HT                  09           
 LF                  0A           
 VT                  0B           
 CR                  0D           
 ESC                 1B           
 DEL                 7F           
 DCS                 90           
 ST                  9C           
 RX_DT_RDY           02           PICO_CODE.psm
 RX_DATA             03           PICO_CODE.psm
 LED                 01           PICO_CODE.psm
 TX_DATA             02           PICO_CODE.psm
 TX_STB              03           PICO_CODE.psm
 RD_PULSE            04           PICO_CODE.psm
 USB_DATA_OUT        0B           PICO_CODE.psm
 USB_DATA_IN         02           PICO_CODE.psm
 USB_RD_WR           0A           PICO_CODE.psm
 usb_rxf             04           PICO_CODE.psm
 usb_txe             03           PICO_CODE.psm
 usb_rd              0C           PICO_CODE.psm
 usb_wr              09           PICO_CODE.psm
 BRAM_DATA_IN        05           PICO_CODE.psm
 BRAM_W              08           PICO_CODE.psm
 BRAM_ADR_70         06           PICO_CODE.psm
 BRAM_ADR_158        07           PICO_CODE.psm
 BRAM_DATA_OUT       05           PICO_CODE.psm
 DDR_DATA_W_31_24    13'd         PICO_CODE.psm
 DDR_DATA_W_23_16    14'd         PICO_CODE.psm
 DDR_DATA_W_15_8     15'd         PICO_CODE.psm
 DDR_DATA_W_7_0      16'd         PICO_CODE.psm
 CMD_WR_PLS          17'd         PICO_CODE.psm
 WR_EN_PLS           18'd         PICO_CODE.psm
 DDR_ADDRESS_INC_WR  21'd         PICO_CODE.psm
 DDR_DATA_R_31_24    06'd         PICO_CODE.psm
 DDR_DATA_R_23_16    07'd         PICO_CODE.psm
 DDR_DATA_R_15_8     08'd         PICO_CODE.psm
 DDR_DATA_R_7_0      09'd         PICO_CODE.psm
 CMD_RD_PLS          19'd         PICO_CODE.psm
 READ_EMPTY          12'd         PICO_CODE.psm
 DDR_ADDRESS_INC_RD  28'd         PICO_CODE.psm
 RD_EN_PLS           22'd         PICO_CODE.psm
 DDR_ADDRESS_RESET_W 23'd         PICO_CODE.psm
 DDR_ADDRESS_RESET_R 24'd         PICO_CODE.psm
 USER_REGADDR_15_8   25'd         PICO_CODE.psm
 USER_REGADDR_7_0    26'd         PICO_CODE.psm
 USER_REGDATAOUT     27'd         PICO_CODE.psm
 USER_REGWE          8'd          PICO_CODE.psm
 USER_REGRE          20'd         PICO_CODE.psm
 USER_REGDATAIN      13'd         PICO_CODE.psm
 USER_READ_START     4'd          PICO_CODE.psm
 USER_DDR_DATA1      1'd          PICO_CODE.psm
 USER_DDR_DATA2      0'd          PICO_CODE.psm
 USER_DDR_DATA3      15'd         PICO_CODE.psm
 USER_DDR_DATA4      20'd         PICO_CODE.psm
 USER_DDR_DATA5      17'd         PICO_CODE.psm
 USER_DDR_DATA6      18'd         PICO_CODE.psm
 USER_DDR_DATA7      19'd         PICO_CODE.psm
 USER_DDR_DATA8      16'd         PICO_CODE.psm
 UR_DATA_RAM         01           PICO_CODE.psm
 DDR_BRAM            02           PICO_CODE.psm
 CMD_WR_RD           03           PICO_CODE.psm
 ST_ADD_1            04           PICO_CODE.psm
 ST_ADD_2            05           PICO_CODE.psm
 N_OF_BYTE1          06           PICO_CODE.psm
 N_OF_BYTE2          07           PICO_CODE.psm
 BT_CNT1             08           PICO_CODE.psm
 BT_CNT2             09           PICO_CODE.psm
 BUFF_AD1            0A           PICO_CODE.psm
 BUFF_AD2            0B           PICO_CODE.psm
 DELL1               36           PICO_CODE.psm
 DELL2               37           PICO_CODE.psm
 DELL3               38           PICO_CODE.psm
 DELL4               39           PICO_CODE.psm
 DELL5               3A           PICO_CODE.psm
 DELL6               3B           PICO_CODE.psm
 RDID_9F             9F           PICO_CODE.psm
 WREN_06             06           PICO_CODE.psm
 PP_02               02           PICO_CODE.psm
 READ_03             03           PICO_CODE.psm
 RDSR_05             05           PICO_CODE.psm
 SE_D8               D8           PICO_CODE.psm
 WRSR_01             01           PICO_CODE.psm
 BE_C7               C7           PICO_CODE.psm
 DELAY_1US_CONSTANT  0B           PICO_CODE.psm



No TABLEs defined



List of text strings

 STRING name       String         Source PSM File

 KCPSM6_version$   "v2.70"        
 datestamp$        "11 Aug 2020"  
 timestamp$        "17:54:17"     



List of line labels

   Label              Addr  Source PSM File

   TEST_USER          003   PICO_CODE.psm
 * RSER_RD_TEST       004   PICO_CODE.psm
   CHECK_FRAME        01C   PICO_CODE.psm
 * START              02E   PICO_CODE.psm
   HJGF               038   PICO_CODE.psm
   WR_DDR_RAM         039   PICO_CODE.psm
   TAKE_NXT_BYT       040   PICO_CODE.psm
   WR_DDR             047   PICO_CODE.psm
   WR_BRAM            049   PICO_CODE.psm
   NXT_LOOP           04B   PICO_CODE.psm
   RD_DDR_RAM         058   PICO_CODE.psm
   SEND_NXT_BYT       05F   PICO_CODE.psm
   RD_DDR             066   PICO_CODE.psm
   RD_BRAM            068   PICO_CODE.psm
   NXT_LOOP1          06B   PICO_CODE.psm
   WR_BRAM_DATA       078   PICO_CODE.psm
   INC_BRAM_ADDRESS   07B   PICO_CODE.psm
   CHK_DT_PRESENT     084   PICO_CODE.psm
   send_one_bt_usb    08B   PICO_CODE.psm
   wr_rdy_chk         08B   PICO_CODE.psm
   take_data_in_usb   097   PICO_CODE.psm
 * LED_BLINK          09D   PICO_CODE.psm
   LP1                09D   PICO_CODE.psm
   WRITE_1_WORD_DDR   0AB   PICO_CODE.psm
   READ_1_WORD_DDR    0CD   PICO_CODE.psm
   DATA_IN_DDR        0D8   PICO_CODE.psm
   WAIT_FOR_DATA      0D8   PICO_CODE.psm
   REG_CONTROL        0E8   PICO_CODE.psm
   W_USER_REG         0EE   PICO_CODE.psm
   R_USER_REG         0FA   PICO_CODE.psm
 * DELAY_10US         106   PICO_CODE.psm
   DELAY_107US        10A   PICO_CODE.psm
 * DELAY_1MS          10E   PICO_CODE.psm
   DELAY_20MS         112   PICO_CODE.psm
 * DELAY_1S           116   PICO_CODE.psm
   SOFTWARE_DELAY     11A   PICO_CODE.psm

      * Line label has not been referenced in any instructions.
        Hint - This may indicate unused code that could be
               removed to reduce the size of this program.



Instruction usage statistics

 Instruction    Instances

 LOAD             46
 STAR              -

 AND               -
 OR                -
 XOR               -

 ADD               3
 ADDCY             3
 SUB               2
 SUBCY             2

 TEST              2
 TESTCY            -
 COMPARE          18
 COMPARECY         -

 SL0               -
 SL1               -
 SLX               -
 SLA               -
 RL                -
 SR0               -
 SR1               -
 SRX               -
 SRA               -
 RR                -

 REGBANK           -

 INPUT            20
 OUTPUT           45
 OUTPUTK           -

 STORE            27
 FETCH            27

 DISABLE           -
 ENABLE            -
 RETURNI           -

 JUMP             34
 JUMP@             -
 CALL             51
 CALL@             -
 RETURN           15
 LOAD&RETURN       -

 HWBUILD           -



End of KCPSM6 log file.
